"use strict";(self.webpackChunkmcq=self.webpackChunkmcq||[]).push([[333,614],{9331:function(e,t,n){n.d(t,{$h:function(){return f},BB:function(){return c},BN:function(){return u},Ho:function(){return i},T0:function(){return s},Uo:function(){return l},V$:function(){return h},iI:function(){return p},tu:function(){return d},wA:function(){return m}});var r=n(1413),a=n(4569),o=n.n(a),i=function(e){return o().get(e,{withCredentials:!0}).then((function(e){return e.data}))},s=function(e){return o().get(e,{withCredentials:!0}).then((function(e){return e.data}))},l=function(e){return o().get(e,{withCredentials:!0}).then((function(e){return e.data}))},c=function(e){return o().get(e,{withCredentials:!0}).then((function(e){return e.data}))},u=function(e){return o().get(e,{withCredentials:!0}).then((function(e){return e.data}))},d=function(e,t){var n=t.courseId,r=t.courseTitle,a=t.published,i=t.thumbnail;return o().post(e,{courseId:n,courseTitle:r,published:a,thumbnail:i},{withCredentials:!0}).then((function(e){return e.data}))},f=function(e,t){var n=t.courseId,r=t.subjectId,a=t.subjectTitle,i=t.published,s=t.thumbnail;return o().post(e,{courseId:n,subjectId:r,subjectTitle:a,published:i,thumbnail:s},{withCredentials:!0}).then((function(e){return e.data}))},h=function(e,t){var n=t.chapterId,r=t.chapterTitle,a=t.published,i=t.order;return o().post(e,{chapterId:n,chapterTitle:r,published:a,sn:i},{withCredentials:!0}).then((function(e){return e.data}))},m=function(e,t){var n=t.courseId,r=t.subjectId,a=t.chapterId,i=t.topicId,s=t.topicTitle,l=t.topicContent,c=t.topicEditor,u=t.published;return o().post(e,{courseId:n,subjectId:r,chapterId:a,topicId:i,topicTitle:s,topicContent:l,topicEditor:c,published:u},{withCredentials:!0}).then((function(e){return e.data}))},p=function(e,t){return o().post(e,(0,r.Z)({},t),{withCredentials:!0}).then((function(e){return e.data}))}},9858:function(e,t,n){n.r(t),n.d(t,{default:function(){return wr}});var r=n(885),a=n(2791),o=n(6871),i=n(3504),s=n(184),l=a.createContext(),c=function(){return(0,a.useContext)(l)},u=function(e){var t=e.children,n=(0,a.useState)({course:!1,subject:{status:!1,courseId:""},chapter:!1,topic:{status:!1,chapterId:""}}),o=(0,r.Z)(n,2),i=o[0],c=o[1],u=(0,a.useState)({course:{status:!1,courseId:""},subject:{status:!1,subjectId:""},chapter:{status:!1,chapterId:""},topic:{status:!1,topicId:""}}),d=(0,r.Z)(u,2),f=d[0],h=d[1],m=(0,a.useState)(""),p=(0,r.Z)(m,2),x=p[0],g=p[1],v=(0,a.useState)(!1),b=(0,r.Z)(v,2),N=b[0],C=b[1];return(0,s.jsx)(l.Provider,{value:{createForm:i,setCreateForm:c,editForm:f,setEditForm:h,errorMessage:x,setErrorMessage:g,isShowing:N,setIsShowing:C},children:t})},d=n(4165),f=n(5861),h=n(2982),m=n(1413);var p=function(e){var t=e.text,n=e.element,r=e.data,a=e.setExpanded,o=void 0===a?null:a,i=e.expanded,l=void 0===i?null:i,u=e.expandIndex,d=void 0===u?null:u,f=c(),p=(f.createForm,f.setCreateForm);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(e){if(e.preventDefault(),p((function(e){return"course"===n?(0,m.Z)((0,m.Z)({},e),{},{course:!e.course}):"subject"===n?(0,m.Z)((0,m.Z)({},e),{},{subject:{status:!e.subject.status,courseId:r.courseId}}):"chapter"===n?(0,m.Z)((0,m.Z)({},e),{},{chapter:!e.chapter}):"topic"===n?(0,m.Z)((0,m.Z)({},e),{},{topic:{status:!e.topic.status,chapterId:r.chapterId}}):null})),null!==l){var t=l;t[d]&&(t[d]=!1,o((0,h.Z)(t)))}},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",type:"submit",children:t})})})},x=n(4569),g=n.n(x),v=n(2419),b=n(9331);var N=function(e){var t=e.text,n=e.element,r=e.data,a=e.setErrorMessage,o=e.setIsShowing,i="https://api.aakhyaan.org"+"/".concat(n,"/delete");return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(e){e.preventDefault();var t=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var t,s;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Confirm"!==prompt("Are you sure to delete the ".concat(n,"? Please type Confirm to delete."),"")){e.next=11;break}return e.next=4,(0,b.iI)(i,r);case 4:s=e.sent,"course"===n?(0,v.JG)("https://api.aakhyaan.org/courses/list"):"subject"===n?(0,v.JG)("https://api.aakhyaan.org"+"/subjects/".concat(r.courseId,"/list")):"chapter"===n?(0,v.JG)("https://api.aakhyaan.org"+"/chapters/".concat(r.courseId,"/").concat(r.subjectId,"/list")):"topic"===n&&(0,v.JG)("https://api.aakhyaan.org"+"/topics/".concat(r.chapterId,"/list")),a(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message),o(!0),setTimeout((function(){o(!1),a("")}),4e3),e.next=14;break;case 11:a("You weren't sure of deleting."),o(!0),setTimeout((function(){o(!1),a("")}),4e3);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t().catch((function(e){return console.log(e)}))},className:"font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",type:"submit",children:t})})})},C=function(e){var t=e.setIsShowing,n=e.setErrorMessage,o=(0,a.useState)({title:"",tag:[],thumbnail:""}),i=(0,r.Z)(o,2),l=i[0],u=i[1],h=c(),p=h.createForm,x=h.setCreateForm;return(0,s.jsx)("div",{className:"".concat(p.course?"flex":"hidden"," w-full"),children:(0,s.jsx)("form",{className:"rounded-md w-full transition-all mt-10 flex flex-col border-2 shadow-md p-5 mb-10 z-20",onSubmit:function(e){e.preventDefault();var r=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().post("https://api.aakhyaan.org/course/create",l,{withCredentials:!0});case 2:a=e.sent,n(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message),t(!0),setTimeout((function(){t(!1),n("")}),4e3),(0,v.JG)("https://api.aakhyaan.org/courses/list");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r().catch((function(e){return console.log(e)})),x((function(e){return(0,m.Z)((0,m.Z)({},e),{},{course:!e.course})}))},children:(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-gray-200 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Course",onChange:function(e){return u((0,m.Z)((0,m.Z)({},l),{},{title:e.target.value}))},required:!0}),(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-gray-200 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Thumbnail",onChange:function(e){return u((0,m.Z)((0,m.Z)({},l),{},{thumbnail:e.target.value}))},required:!0}),(0,s.jsx)("button",{onClick:function(e){e.preventDefault(),x((function(e){return(0,m.Z)((0,m.Z)({},e),{},{course:!1})}))},className:"float-left flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Close"}),(0,s.jsx)("button",{className:"float-right flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Submit"})]})})})},j=function(e){var t=e.courseId,n=e.setIsShowing,o=e.setErrorMessage,i=(0,a.useState)({title:"",tag:[],thumbnail:""}),l=(0,r.Z)(i,2),u=l[0],h=l[1],p=c(),x=p.createForm,b=p.setCreateForm;return(0,s.jsx)("div",{className:"".concat(x.subject?"flex":"hidden"," w-full h-full absolute top-0 right-0 bg-blue-50 rounded-[1em] z-20"),children:(0,s.jsx)("form",{className:"w-full transition-all mt-10 flex flex-col p-5 mb-10",onSubmit:function(e){if(e.preventDefault(),""!==u.title){var r=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().post("https://api.aakhyaan.org/subject/create",(0,m.Z)((0,m.Z)({},u),{},{courseId:t}),{withCredentials:!0});case 2:a=e.sent,o(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message),n(!0),setTimeout((function(){n(!1),o("")}),4e3),(0,v.JG)("https://api.aakhyaan.org"+"/subjects/".concat(t,"/list"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r().catch((function(e){return console.log(e)})),b((function(e){return(0,m.Z)((0,m.Z)({},e),{},{subject:!e.subject})}))}},children:(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Subject",onChange:function(e){return h((0,m.Z)((0,m.Z)({},u),{},{title:e.target.value}))},required:!0}),(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-gray-200 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Thumbnail",onChange:function(e){return h((0,m.Z)((0,m.Z)({},u),{},{thumbnail:e.target.value}))},required:!0}),(0,s.jsx)("button",{onClick:function(e){e.preventDefault(),b((function(e){return(0,m.Z)((0,m.Z)({},e),{},{subject:!1})}))},className:"float-left flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Close"}),(0,s.jsx)("button",{className:"float-right flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Submit"})]})})})},w=function(e){var t=e.courseId,n=e.subjectId,o=e.setIsShowing,i=e.setErrorMessage,l=(0,a.useState)({title:"",tag:[],order:0}),u=(0,r.Z)(l,2),h=u[0],p=u[1],x=c(),b=x.createForm,N=x.setCreateForm;return(0,s.jsx)("div",{className:"".concat(b.chapter?"flex":"hidden"," w-full absolute top-4 left-0 z-20"),children:(0,s.jsx)("form",{className:"w-full transition-all mt-10 flex flex-col border-2 shadow-md bg-pink-50 p-5 mb-10",onSubmit:function(e){e.preventDefault();var r=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().post("https://api.aakhyaan.org/chapter/create",(0,m.Z)((0,m.Z)({},h),{},{courseId:t,subjectId:n}),{withCredentials:!0});case 2:a=e.sent,i(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message),o(!0),setTimeout((function(){o(!1),i("")}),4e3),(0,v.JG)("https://api.aakhyaan.org"+"/chapters/".concat(t,"/").concat(n,"/list"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r().catch((function(e){return console.log(e)})),N((function(e){return(0,m.Z)((0,m.Z)({},e),{},{chapter:!e.chapter})}))},children:(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Chapter Name",onChange:function(e){return p((0,m.Z)((0,m.Z)({},h),{},{title:e.target.value}))},required:!0}),(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Chapter Order",onChange:function(e){return p((0,m.Z)((0,m.Z)({},h),{},{sn:e.target.value}))},required:!0}),(0,s.jsx)("button",{onClick:function(e){e.preventDefault(),N((function(e){return(0,m.Z)((0,m.Z)({},e),{},{chapter:!1})}))},className:"float-left flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Close"}),(0,s.jsx)("button",{className:"float-right flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Submit"})]})})})},y=function(e){var t=e.chapterId,n=e.setIsShowing,o=e.setErrorMessage,i=(0,a.useState)({title:"",content:"",sn:0}),l=(0,r.Z)(i,2),u=l[0],h=l[1],p=c(),x=p.createForm,b=p.setCreateForm;return(0,s.jsx)("div",{className:"".concat(x.topic?"flex":"hidden"," w-full h-full absolute top-0 right-0 bg-blue-50 rounded-[1em] z-20"),children:(0,s.jsx)("form",{className:"w-full transition-all mt-10 flex flex-col p-5 mb-10",onSubmit:function(e){e.preventDefault();var r=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().post("https://api.aakhyaan.org/topic/create",(0,m.Z)((0,m.Z)({},u),{},{chapterId:t}),{withCredentials:!0});case 2:a=e.sent,o(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message),n(!0),setTimeout((function(){n(!1),o("")}),4e3),(0,v.JG)("https://api.aakhyaan.org"+"/topics/".concat(t,"/list"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r().catch((function(e){return console.log(e)})),b((function(e){return(0,m.Z)((0,m.Z)({},e),{},{topic:!e.topic})}))},children:(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Topic Name",onChange:function(e){return h((0,m.Z)((0,m.Z)({},u),{},{title:e.target.value}))},required:!0}),(0,s.jsx)("input",{className:"font-sans shadow appearance-none border focus:outline-blue-800 focus:shadow-none border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight",type:"text",placeholder:"Topic Order",onChange:function(e){return h((0,m.Z)((0,m.Z)({},u),{},{sn:e.target.value}))},required:!0}),(0,s.jsx)("button",{onClick:function(e){e.preventDefault(),b((function(e){return(0,m.Z)((0,m.Z)({},e),{},{topic:!1})}))},className:"float-left flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Close"}),(0,s.jsx)("button",{className:"float-right flex items-center gap-2 font-sans text-lg hover:translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Submit"})]})})})},_=n(7692),k=n(71);var E=function(e){var t=e.setCourseErrorMessage,n=e.setCourseIsShowing,i=e.courseId,l=(0,o.s0)(),u=(0,a.useState)([]),h=(0,r.Z)(u,2),m=h[0],p=h[1],x=c(),g=(x.errorMessage,x.setErrorMessage),C=(x.isShowing,x.setIsShowing),j=(0,a.useRef)([]),w=(0,a.useRef)([]),y=(0,v.ZP)("https://api.aakhyaan.org"+"/subjects/".concat(i,"/list"),function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.T0)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=y.data,T=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t,n,r,a,o){var i;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.$h)("https://api.aakhyaan.org/subject/edit",{courseId:t,subjectId:n,subjectTitle:r,published:a,thumbnail:o});case 2:i=e.sent,g(null===i||void 0===i?void 0:i.message),C(!0),setTimeout((function(){C(!1),g("")}),4e3),(0,v.JG)("https://api.aakhyaan.org"+"/subjects/".concat(t,"/list"));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e;p(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.subjects)}),[E]),(0,s.jsx)("div",{className:"w-full flex gap-5 flex-col z-10 px-5",children:null===m||void 0===m?void 0:m.map((function(e,r){return(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"shadow-md border-b-2 md:border-2 border-red-200 rounded-[0.5em] text-center py-2 flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-5",children:[(0,s.jsx)("div",{ref:function(e){return j.current.push(e)},className:"text-xl font-bold text-red-800 font-mono",onInput:function(e){console.log(e.currentTarget.textContent)},onBlur:function(t){T(i,e._id,t.currentTarget.textContent,e.published,e.thumbnail),j.current[r].contentEditable=!1},children:e.title}),(0,s.jsx)(_.Hlf,{size:18,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),j.current[r].contentEditable=!0,j.current[r].focus()}})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col mb-10",children:[(0,s.jsx)("span",{ref:function(e){return w.current.push(e)},className:"text-blue-600 break-words font-sans font-light p-1",onBlur:function(t){T(i,e._id,e.title,e.published,t.currentTarget.textContent),w.current[r].contentEditable=!1},children:e.thumbnail}),(0,s.jsx)("span",{className:"mx-auto",children:(0,s.jsx)(_.Hlf,{size:24,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),w.current[r].contentEditable=!0,w.current[r].focus()}})})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:function(t){t.preventDefault(),l("/admin/courses/".concat(i,"/").concat(e._id))},children:[(0,s.jsx)("span",{className:"text-blue-600 border-b border-blue-500",children:"See all chapters"}),(0,s.jsx)(k.u3h,{color:"blue",className:"hover:translate-y-0.5 justify-self-end"})]}),(0,s.jsx)("div",{className:"w-full flex justify-center py-3",children:e.published?(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){T(i,e._id,e.title,!1)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Unpublish"})}):(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){T(i,e._id,e.title,!0)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Publish"})})}),(0,s.jsx)("div",{className:"relative py-2 flex w-full justify-around",children:(0,s.jsx)(N,{text:"Delete Subject",element:"subject",data:{courseId:i,subjectId:e._id},setErrorMessage:t,setIsShowing:n})})]})]})},e._id)}))})},T=n(4373);var S=function(e){var t=e.courses,n=c().createForm,o=(0,a.useState)([]),i=(0,r.Z)(o,2),l=i[0],u=i[1],m=c(),x=m.errorMessage,g=m.setErrorMessage,w=m.isShowing,y=m.setIsShowing,k=(0,a.useRef)([]),S=(0,a.useRef)([]),I=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t,n,r,a){var o;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.tu)("https://api.aakhyaan.org/course/edit",{courseId:t,courseTitle:n,published:r,thumbnail:a});case 2:o=e.sent,g(null===o||void 0===o?void 0:o.message),y(!0),setTimeout((function(){y(!1),g("")}),4e3),(0,v.JG)("https://api.aakhyaan.org/courses/list");case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"col-span-4 flex flex-col h-[70vh] md:h-full w-full",children:[(0,s.jsx)("div",{className:"text-3xl text-center font-bold border-b-2 border-green-200 pt-6 pb-2 px-6",children:"Courses"}),(0,s.jsxs)("div",{className:"h-fit relative p-10 pb-2 flex-1 my-6 mx-6 border-2 border-gray-200 rounded-xl",children:[(0,s.jsx)("div",{className:"text-center text-3xl",children:"All Courses"}),(0,s.jsx)("div",{className:"relative flex flex-col justify-between m-4 ",children:null===t||void 0===t?void 0:t.map((function(e,t){return(0,s.jsxs)("div",{className:"relative shadow-blue-200 hover:shadow-md border-2 rounded-[1em] p-3 my-2",children:[(0,s.jsxs)("div",{className:"text-center p-2 mt-2 flex justify-center",children:[(0,s.jsx)("span",{ref:function(e){return k.current.push(e)},className:"text-blue-600 break-words font-mono text-[1.6rem] font-bold border-b-2 p-1",onBlur:function(n){I(e._id,n.currentTarget.textContent,e.published,e.thumbnail),k.current[t].contentEditable=!1},children:e.title}),(0,s.jsx)(_.Hlf,{size:24,color:"red",className:"hover:translate-y-0.5 justify-self-end cursor-pointer",onClick:function(e){e.preventDefault(),k.current[t].contentEditable=!0,k.current[t].focus()}}),(0,s.jsx)("div",{onClick:function(){var e=l;e[t]?(e[t]=!1,u((0,h.Z)(e))):(e[t]=!0,u((0,h.Z)(e)))},className:"".concat(l[t]?"rotate-180":""," hover:cursor-pointer ml-2 md:ml-0 md:absolute right-10"),children:(0,s.jsx)(T.U0j,{color:"blue",size:35})})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col mb-10",children:[(0,s.jsx)("span",{ref:function(e){return S.current.push(e)},className:"text-blue-600 break-words font-sans font-light p-1",onBlur:function(n){I(e._id,e.title,e.published,n.currentTarget.textContent),S.current[t].contentEditable=!1},children:e.thumbnail}),(0,s.jsx)("span",{className:"mb-10",children:(0,s.jsx)(_.Hlf,{size:24,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),S.current[t].contentEditable=!0,S.current[t].focus()}})})]}),n.subject.courseId===e._id?(0,s.jsx)("div",{className:"mb-16",children:(0,s.jsx)(j,{courseId:e._id,setIsShowing:y,setErrorMessage:g})}):null,l[t]?(0,s.jsx)("div",{className:"animate-dropdownOpen",children:(0,s.jsx)(E,{setCourseErrorMessage:g,setCourseIsShowing:y,courseId:e._id})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"mt-8 flex gap-3 md:flex-row flex-col md:justify-between",children:[(0,s.jsx)(N,{text:"Delete Course",element:"course",data:{courseId:e._id},setErrorMessage:g,setIsShowing:y}),e.published?(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){I(e._id,e.title,!1,e.thumbnail)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Unpublish"})}):(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){I(e._id,e.title,!0,e.thumbnail)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Publish"})}),(0,s.jsx)(p,{text:"Add Subject",element:"subject",setExpanded:u,expanded:l,expandIndex:t,data:{courseId:e._id}})]})]},t)}))}),(0,s.jsxs)("div",{className:"relative m-4",children:[(0,s.jsx)(p,{text:"Create Course",element:"course"}),(0,s.jsx)(C,{setIsShowing:y,setErrorMessage:g})]}),(0,s.jsx)("div",{className:"".concat(w?"animate-fade":""," fixed bottom-10 right-10 text-warningText border-2 bg-slate-300 rounded-md px-2"),children:x})]})]})};var I=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=(0,v.ZP)("https://api.aakhyaan.org/courses/list",function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Ho)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=i.data;return(0,a.useEffect)((function(){o(null===l||void 0===l?void 0:l.data)}),[l]),(0,s.jsx)(S,{courses:n})};var Z=function(e){var t=e.chapterId,n=e.setSubjectErrorMessage,i=e.setSubjectIsShowing,l=(0,o.s0)(),u=(0,o.UO)(),h=(0,a.useState)([]),m=(0,r.Z)(h,2),p=m[0],x=m[1],g=c(),C=(g.errorMessage,g.setErrorMessage),j=(g.isShowing,g.setIsShowing),w=(0,a.useRef)([]),y=(0,a.useRef)([]),E=(0,v.ZP)("https://api.aakhyaan.org"+"/topics/".concat(t,"/list"),function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.BB)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=E.data,S=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t,n,r,a,o,i){var s;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.wA)("https://api.aakhyaan.org/topic/edit",{topicId:n,topicTitle:r,topicContent:a,published:o,sn:i});case 2:s=e.sent,C(null===s||void 0===s?void 0:s.message),j(!0),setTimeout((function(){j(!1),C("")}),4e3),(0,v.JG)("https://api.aakhyaan.org"+"/topics/".concat(t,"/list"));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e;x(null===T||void 0===T||null===(e=T.data)||void 0===e?void 0:e.topics)}),[T]),(0,s.jsx)("div",{className:"w-full flex justify-between flex-wrap gap-2 mt-4 z-10",children:null===p||void 0===p?void 0:p.map((function(e,r){return(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"shadow-md border-b-2 md:border-2 border-red-200 rounded-[0.5em] cursor-pointer text-center py-2 flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-5",children:[(0,s.jsx)(_.Hlf,{size:18,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),y.current[r].contentEditable=!0,y.current[r].focus()}}),(0,s.jsx)("span",{ref:function(e){return y.current.push(e)},className:"text-blue-600 font-mono text-[1.6rem] font-bold border-b-2 py-1",onBlur:function(t){S(u.chapterId,e._id,e.title,e.content,e.published,t.currentTarget.textContent),y.current[r].contentEditable=!1},children:null===e||void 0===e?void 0:e.sn}),(0,s.jsx)("span",{className:"text-blue-600 font-mono text-[1.6rem] font-bold border-b-2 py-1 pr-2",children:"."}),(0,s.jsx)("span",{ref:function(e){return w.current.push(e)},className:"text-xl font-bold text-red-800 flex font-mono",onBlur:function(n){S(t,e._id,n.currentTarget.textContent,e.content,e.published,e.sn),w.current[r].contentEditable=!1},children:e.title}),(0,s.jsx)(_.Hlf,{size:18,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),console.log(w.current[r]),w.current[r].contentEditable=!0,w.current[r].focus()}})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:function(n){n.preventDefault(),l("/admin/courses/".concat(u.courseId,"/").concat(u.subjectId,"/").concat(t,"/").concat(e._id))},children:[(0,s.jsx)("span",{className:"text-blue-600 border-b border-blue-500",children:"Check Content"}),(0,s.jsx)(k.u3h,{color:"blue",className:"hover:translate-y-0.5 justify-self-end"})]}),(0,s.jsx)("div",{className:"w-full flex justify-center py-3",children:e.published?(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){S(t,e._id,e.title,e.content,!1)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Unpublish"})}):(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){S(t,e._id,e.title,e.content,!0)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Publish"})})}),(0,s.jsx)("div",{className:"relative py-2 flex w-full justify-around",children:(0,s.jsx)(N,{text:"Delete Topic",element:"topic",data:{chapterId:t,topicId:e._id},setErrorMessage:n,setIsShowing:i})})]})]})},e._id)}))})};var R=function(e){var t=e.courseId,n=e.chapters,i=e.subjectTitle,l=c().createForm,u=(0,o.UO)(),m=(0,a.useState)([]),x=(0,r.Z)(m,2),g=x[0],C=x[1],j=c(),k=j.errorMessage,E=j.setErrorMessage,S=j.isShowing,I=j.setIsShowing,R=(0,a.useState)([]),M=(0,r.Z)(R,2),O=M[0],A=M[1],L=(0,a.useRef)([]),P=(0,a.useRef)([]);(0,a.useEffect)((function(){C(n)}),[n]);var D=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n,r,a,o,i){var s;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.V$)("https://api.aakhyaan.org/chapter/edit",{chapterId:r,chapterTitle:a,published:o,order:i});case 2:s=e.sent,E(null===s||void 0===s?void 0:s.message),I(!0),setTimeout((function(){I(!1),E("")}),4e3),(0,v.JG)("https://api.aakhyaan.org"+"/chapters/".concat(t,"/").concat(n,"/list"));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"col-span-4 flex flex-col h-full",children:[(0,s.jsx)("div",{className:"text-3xl text-center font-bold border-b-2 border-green-200 pt-6 pb-2 px-6",children:"chaptersList"}),(0,s.jsxs)("div",{className:"h-fit relative p-10 pb-2 flex-1 my-6 mx-6 border-2 border-gray-200 rounded-xl",children:[(0,s.jsx)("div",{className:"text-center text-3xl",children:i}),(0,s.jsx)("div",{className:"relative flex flex-col justify-between m-4 ",children:null===g||void 0===g?void 0:g.map((function(e,t){return(0,s.jsxs)("div",{className:"hover:cursor-pointer relative shadow-blue-200 hover:shadow-md border-2 rounded-[1em] p-3 my-2",children:[(0,s.jsxs)("div",{className:"text-center p-2 mt-2 flex justify-center",children:[(0,s.jsx)(_.Hlf,{size:18,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),P.current[t].contentEditable=!0,P.current[t].focus()}}),(0,s.jsx)("span",{ref:function(e){return P.current.push(e)},className:"text-blue-600 font-mono text-[1.6rem] font-bold border-b-2 py-1",onBlur:function(n){D(u.subjectId,e._id,e.title,e.published,n.currentTarget.textContent),P.current[t].contentEditable=!1},children:null===e||void 0===e?void 0:e.sn}),(0,s.jsx)("span",{className:"text-blue-600 font-mono text-[1.6rem] font-bold border-b-2 py-1 pr-2",children:"."}),(0,s.jsx)("span",{ref:function(e){return L.current.push(e)},className:"text-blue-600 font-mono text-[1.6rem] font-bold border-b-2 p-1",onBlur:function(n){D(u.subjectId,e._id,n.currentTarget.textContent,e.published,e.order),L.current[t].contentEditable=!1},children:e.title}),(0,s.jsx)(_.Hlf,{size:18,color:"red",className:"hover:translate-y-0.5 cursor-pointer",onClick:function(e){e.preventDefault(),L.current[t].contentEditable=!0,L.current[t].focus()}}),(0,s.jsx)("div",{onClick:function(){var e=O;e[t]?(e[t]=!1,A((0,h.Z)(e))):(e[t]=!0,A((0,h.Z)(e)))},className:"".concat(O[t]?"rotate-180":""," hover:cursor-pointer absolute right-10"),children:(0,s.jsx)(T.U0j,{color:"blue",size:35})})]}),l.topic.chapterId===e._id?(0,s.jsx)("div",{className:"mb-24",children:(0,s.jsx)(y,{courseId:u.courseId,subjectId:u.subjectId,chapterId:e._id,setIsShowing:I,setErrorMessage:E})}):null,O[t]?(0,s.jsx)("div",{className:"animate-dropdownOpen",children:(0,s.jsx)(Z,{setSubjectErrorMessage:E,setSubjectIsShowing:I,chapterId:e._id})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"mt-8 flex gap-3 md:flex-row flex-col md:justify-between",children:[(0,s.jsx)(N,{text:"Delete Chapter",element:"chapter",data:{courseId:u.courseId,subjectId:u.subjectId,chapterId:e._id},setErrorMessage:E,setIsShowing:I}),e.published?(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){D(u.subjectId,e._id,e.title,!1)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Unpublish"})}):(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:function(){D(u.subjectId,e._id,e.title,!0)},className:"flex items-center gap-2 font-sans text-md md:text-lg hover:translate-y-0.5 transition-all bg-slate-500 hover:bg-red-700 text-white py-2 px-1 md:px-4 rounded-md focus:outline-none focus:shadow-outline",children:"Publish"})}),(0,s.jsx)(p,{text:"Add Topic",element:"topic",setExpanded:A,expanded:O,expandIndex:t,data:{chapterId:e._id}})]})]},e._id)}))}),(0,s.jsxs)("div",{className:"relative m-3",children:[(0,s.jsx)(p,{text:"Create Chapter",element:"chapter"}),(0,s.jsx)(w,{courseId:t,subjectId:u.subjectId,setIsShowing:I,setErrorMessage:E})]}),(0,s.jsx)("div",{className:"".concat(S?"animate-fade":""," fixed bottom-10 right-10 text-warningText border-2 bg-slate-300 rounded-md px-2"),children:k})]})]})};var M=function(){var e,t,n=(0,a.useState)([]),i=(0,r.Z)(n,2),l=i[0],c=i[1],u=(0,o.UO)(),h=(0,v.ZP)("https://api.aakhyaan.org"+"/chapters/".concat(u.courseId,"/").concat(u.subjectId,"/list"),function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Uo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=h.data;return(0,a.useEffect)((function(){var e;c(null===m||void 0===m||null===(e=m.data)||void 0===e?void 0:e.chapters)}),[m]),(0,s.jsx)(R,{courseId:null===u||void 0===u?void 0:u.courseId,chapters:l,subjectTitle:null===m||void 0===m||null===(e=m.data)||void 0===e||null===(t=e.subject)||void 0===t?void 0:t.title})},O=n(5224),A=n(4942),L=window.location.hostname,P={disableBeforeInput:!1,emptyEditor:"playground.lexical.dev"!==L&&"lexical-playground.vercel.app"!==L,isAutocomplete:!1,isCharLimit:!1,isCharLimitUtf8:!1,isCollab:!1,isMaxLength:!1,isRichText:!0,measureTypingPerf:!1,showNestedEditorTreeView:!1,showTableOfContents:!1,showTreeView:!0},D=(0,a.createContext)({setOption:function(e,t){},settings:P}),$=function(e){var t=e.children,n=(0,a.useState)(P),o=(0,r.Z)(n,2),i=o[0],l=o[1],c=(0,a.useCallback)((function(e,t){l((function(n){return(0,m.Z)((0,m.Z)({},n),{},(0,A.Z)({},e,t))})),z(e,P[e]===t?null:t)}),[]),u=(0,a.useMemo)((function(){return{setOption:c,settings:i}}),[c,i]);return(0,s.jsx)(D.Provider,{value:u,children:t})},F=function(){return(0,a.useContext)(D)};function z(e,t){var n=new URL(window.location.href),r=new URLSearchParams(n.search);null!==t?r.has(e)?r.set(e,String(t)):r.append(e,String(t)):r.has(e)&&r.delete(e),n.search=r.toString(),window.history.pushState(null,"",n.toString())}var H=n(3527),B=(0,a.createContext)({}),q=function(e){var t=e.children,n=(0,a.useMemo)((function(){return{historyState:(0,H.createEmptyHistoryState)()}}),[]);return(0,s.jsx)(B.Provider,{value:n,children:t})},U=function(){return(0,a.useContext)(B)},W=n(3570),Y=n(1927),K=n(4174),G=n(3732),X=n(6010),J=n(5528),V=n(5053),Q=n(9070),ee=n(6448),te=n(5845),ne=n(5738),re=n(1665),ae=n(4140),oe=n(7985),ie=n(5523),se=n(4164);function le(e){var t=e.onClose,n=e.children,r=e.title,o=e.closeOnClickOutside,i=(0,a.useRef)(null);return(0,a.useEffect)((function(){null!==i.current&&i.current.focus()}),[]),(0,a.useEffect)((function(){var e,n,r=null,a=function(e){27===e.keyCode&&t()},s=function(e){var n=e.target;null!==i.current&&!i.current.contains(n)&&o&&t()};null!==i.current&&(null!==(r=null===(e=i.current)||void 0===e?void 0:e.parentElement)&&(null===(n=r)||void 0===n||n.addEventListener("click",s)));return window.addEventListener("keydown",a),function(){var e;(window.removeEventListener("keydown",a),null!==r)&&(null===(e=r)||void 0===e||e.removeEventListener("click",s))}}),[o,t]),(0,s.jsx)("div",{className:"Modal__overlay",role:"dialog",children:(0,s.jsxs)("div",{className:"Modal__modal",tabIndex:-1,ref:i,children:[(0,s.jsx)("h2",{className:"Modal__title",children:r}),(0,s.jsx)("button",{className:"Modal__closeButton","aria-label":"Close modal",type:"button",onClick:t,children:"X"}),(0,s.jsx)("div",{className:"Modal__content",children:n})]})})}function ce(e){var t=e.onClose,n=e.children,r=e.title,a=e.closeOnClickOutside,o=void 0!==a&&a;return(0,se.createPortal)((0,s.jsx)(le,{onClose:t,title:r,closeOnClickOutside:o,children:n}),document.body)}function ue(){var e=(0,a.useState)(null),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=(0,a.useCallback)((function(){o(null)}),[]),l=(0,a.useMemo)((function(){if(null===n)return null;var e=n.title,t=n.content,r=n.closeOnClickOutside;return(0,s.jsx)(ce,{onClose:i,title:e,closeOnClickOutside:r,children:t})}),[n,i]),c=(0,a.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o({closeOnClickOutside:n,content:t(i),title:e})}),[i]);return[l,c]}function de(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function fe(e){var t=e["data-test-id"],n=e.children,r=e.className,a=e.onClick,o=e.disabled,i=e.small,l=e.title;return(0,s.jsx)("button",(0,m.Z)((0,m.Z)({disabled:o,className:de("Button__root",o&&"Button__disabled",i&&"Button__small",r),onClick:a,title:l,"aria-label":l},t&&{"data-test-id":t}),{},{children:n}))}var he=n(7762),me=n(3028),pe=n(4937),xe=n(5671),ge=n(3144),ve=n(9340),be=n(1129);function Ne(e){var t=e.equation,n=e.setEquation,r=e.inline,a=e.inputRef,o={equation:t,inputRef:a,onChange:function(e){n(e.target.value)}};return r?(0,s.jsx)(Ce,(0,m.Z)((0,m.Z)({},o),{},{inputRef:a})):(0,s.jsx)(je,(0,m.Z)((0,m.Z)({},o),{},{inputRef:a}))}function Ce(e){var t=e.equation,n=e.onChange,r=e.inputRef;return(0,s.jsxs)("span",{className:"EquationEditor_inputBackground",children:[(0,s.jsx)("span",{className:"EquationEditor_dollarSign",children:"$"}),(0,s.jsx)("input",{className:"EquationEditor_inlineEditor",value:t,onChange:n,autoFocus:!0,ref:r}),(0,s.jsx)("span",{className:"EquationEditor_dollarSign",children:"$"})]})}function je(e){var t=e.equation,n=e.onChange,r=e.inputRef;return(0,s.jsxs)("div",{className:"EquationEditor_inputBackground",children:[(0,s.jsx)("span",{className:"EquationEditor_dollarSign",children:"$$\n"}),(0,s.jsx)("textarea",{className:"EquationEditor_blockEditor",value:t,onChange:n,ref:r}),(0,s.jsx)("span",{className:"EquationEditor_dollarSign",children:"\n$$"})]})}var we=n(1400);function ye(e){var t=e.equation,n=e.inline,r=e.onClick,o=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=o.current;null!==e&&we.Z.render(t,e,{displayMode:!n,errorColor:"#cc0000",output:"html",strict:"warn",throwOnError:!1,trust:!1})}),[t,n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spacer",children:" "}),(0,s.jsx)("span",{role:"button",tabIndex:-1,onClick:r,ref:o}),(0,s.jsx)("span",{className:"spacer",children:" "})]})}function _e(e){var t=e.equation,n=e.inline,o=e.nodeKey,i=(0,re.useLexicalComposerContext)(),l=(0,r.Z)(i,1)[0],c=(0,a.useState)(t),u=(0,r.Z)(c,2),d=u[0],f=u[1],h=(0,a.useState)(!1),m=(0,r.Z)(h,2),p=m[0],x=m[1],g=(0,a.useRef)(null),v=(0,a.useCallback)((function(e){x(!1),l.update((function(){var t=(0,ie.$getNodeByKey)(o);Te(t)&&(t.setEquation(d),e&&t.selectNext(0,0))}))}),[l,d,o]);return(0,a.useEffect)((function(){if(p)return(0,ae.mergeRegister)(l.registerCommand(ie.SELECTION_CHANGE_COMMAND,(function(e){var t=document.activeElement;return g.current!==t&&v(),!1}),ie.COMMAND_PRIORITY_HIGH),l.registerCommand(ie.KEY_ESCAPE_COMMAND,(function(e){var t=document.activeElement;return g.current===t&&(v(!0),!0)}),ie.COMMAND_PRIORITY_HIGH))}),[l,v,p]),(0,s.jsx)(s.Fragment,{children:p?(0,s.jsx)(Ne,{equation:d,setEquation:f,inline:n,inputRef:g}):(0,s.jsx)(ye,{equation:d,inline:n,onClick:function(){x(!0)}})})}var ke=function(e){(0,ve.Z)(n,e);var t=(0,be.Z)(n);function n(e,r,a){var o;return(0,xe.Z)(this,n),(o=t.call(this,a)).__equation=void 0,o.__inline=void 0,o.__equation=e,o.__inline=null!==r&&void 0!==r&&r,o}return(0,ge.Z)(n,[{key:"exportJSON",value:function(){return{equation:this.getEquation(),inline:this.__inline,type:"equation",version:1}}},{key:"createDOM",value:function(e){return document.createElement(this.__inline?"span":"div")}},{key:"updateDOM",value:function(e){return this.__inline!==e.__inline}},{key:"getEquation",value:function(){return this.__equation}},{key:"setEquation",value:function(e){this.getWritable().__equation=e}},{key:"decorate",value:function(){return(0,s.jsx)(_e,{equation:this.__equation,inline:this.__inline,nodeKey:this.__key})}}],[{key:"getType",value:function(){return"equation"}},{key:"clone",value:function(e){return new n(e.__equation,e.__inline,e.__key)}},{key:"importJSON",value:function(e){return Ee(e.equation,e.inline)}}]),n}(ie.DecoratorNode);function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new ke(e,t);return n}function Te(e){return e instanceof ke}var Se=n(5174),Ie=n(7827),Ze=function(){return window.getSelection()},Re=(0,ie.createCommand)();function Me(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useEffect)((function(){if(!t.hasNodes([tt]))throw new Error("ImagesPlugin: ImageNode not registered on editor");return(0,ae.mergeRegister)(t.registerCommand(Re,(function(e){var t=(0,ie.$getSelection)();if((0,ie.$isRangeSelection)(t)){(0,ie.$isRootNode)(t.anchor.getNode())&&t.insertParagraph();var n=nt(e);t.insertNodes([n])}return!0}),ie.COMMAND_PRIORITY_EDITOR),t.registerCommand(ie.DRAGSTART_COMMAND,(function(e){return function(e){var t=Ae();if(!t)return!1;var n=e.dataTransfer;if(!n)return!1;return n.setData("text/plain","_"),n.setDragImage(Oe,0,0),n.setData("application/x-lexical-drag",JSON.stringify({data:{altText:t.__altText,caption:t.__caption,height:t.__height,key:t.getKey(),maxWidth:t.__maxWidth,showCaption:t.__showCaption,src:t.__src,width:t.__width},type:"image"})),!0}(e)}),ie.COMMAND_PRIORITY_HIGH),t.registerCommand(ie.DRAGOVER_COMMAND,(function(e){return function(e){if(!Ae())return!1;Le(e)||e.preventDefault();return!0}(e)}),ie.COMMAND_PRIORITY_LOW),t.registerCommand(ie.DROP_COMMAND,(function(e){return function(e,t){var n=Ae();if(!n)return!1;var r=function(e){var t,n=null===(t=e.dataTransfer)||void 0===t?void 0:t.getData("application/x-lexical-drag");if(!n)return null;var r=JSON.parse(n),a=r.type,o=r.data;if("image"!==a)return null;return o}(e);if(!r)return!1;if(e.preventDefault(),Le(e)){var a=function(e){var t,n=Ze();if(document.caretRangeFromPoint)t=document.caretRangeFromPoint(e.clientX,e.clientY);else{if(!e.rangeParent||null===n)throw Error("Cannot get the selection when dragging");n.collapse(e.rangeParent,e.rangeOffset||0),t=n.getRangeAt(0)}return t}(e);n.remove();var o=(0,ie.$createRangeSelection)();null!==a&&void 0!==a&&o.applyDOMRange(a),(0,ie.$setSelection)(o),t.dispatchCommand(Re,r)}return!0}(e,t)}),ie.COMMAND_PRIORITY_HIGH))}),[t]),null}var Oe=document.createElement("img");function Ae(){var e=(0,ie.$getSelection)();if(!(0,ie.$isNodeSelection)(e))return null;var t=e.getNodes()[0];return rt(t)?t:null}function Le(e){var t=e.target;return!!(t&&t instanceof HTMLElement&&!t.closest("code, span.editor-image")&&t.parentElement&&t.parentElement.closest("div.ContentEditable__root"))}function Pe(e){var t=e.onClose,n=e.tableCellNode,o=e.setIsMenuOpen,i=e.contextRef,l=(0,re.useLexicalComposerContext)(),c=(0,r.Z)(l,1)[0],u=(0,a.useRef)(null),d=(0,a.useState)(n),f=(0,r.Z)(d,2),h=f[0],m=f[1],p=(0,a.useState)({columns:1,rows:1}),x=(0,r.Z)(p,2),g=x[0],v=x[1];(0,a.useEffect)((function(){return c.registerMutationListener(pe.TableCellNode,(function(e){"updated"===e.get(h.getKey())&&c.getEditorState().read((function(){m(h.getLatest())}))}))}),[c,h]),(0,a.useEffect)((function(){c.getEditorState().read((function(){var e=(0,ie.$getSelection)();if((0,ie.$isGridSelection)(e)){var t=e.getShape();v({columns:t.toX-t.fromX+1,rows:t.toY-t.fromY+1})}}))}),[c]),(0,a.useEffect)((function(){var e=i.current,t=u.current;if(null!=e&&null!=t){var n=e.getBoundingClientRect();t.style.opacity="1",t.style.left="".concat(n.left+n.width+window.pageXOffset+5,"px"),t.style.top="".concat(n.top+window.pageYOffset,"px")}}),[i,u]),(0,a.useEffect)((function(){function e(e){null==u.current||null==i.current||u.current.contains(e.target)||i.current.contains(e.target)||o(!1)}return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}),[o,i]);var b=(0,a.useCallback)((function(){c.update((function(){if(h.isAttached()){var e=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h),t=c.getElementByKey(e.getKey());if(!t)throw new Error("Expected to find tableElement in DOM");var n=(0,pe.getTableSelectionFromTableElement)(t);null!==n&&n.clearHighlight(),e.markDirty(),m(h.getLatest())}(0,ie.$setSelection)(null)}))}),[c,h]),N=(0,a.useCallback)((function(e){c.update((function(){var n,r=(0,ie.$getSelection)(),a=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h);if((0,ie.$isGridSelection)(r)){var o=r.getShape();n=e?o.toY:o.fromY}else n=(0,pe.$getTableRowIndexFromTableCellNode)(h);var i=(0,pe.$getElementGridForTableNode)(c,a);(0,pe.$insertTableRow)(a,n,e,g.rows,i),b(),t()}))}),[c,h,g.rows,b,t]),C=(0,a.useCallback)((function(e){c.update((function(){var n,r=(0,ie.$getSelection)(),a=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h);if((0,ie.$isGridSelection)(r)){var o=r.getShape();n=e?o.toX:o.fromX}else n=(0,pe.$getTableColumnIndexFromTableCellNode)(h);(0,pe.$insertTableColumn)(a,n,e,g.columns),b(),t()}))}),[c,h,g.columns,b,t]),j=(0,a.useCallback)((function(){c.update((function(){var e=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h),n=(0,pe.$getTableRowIndexFromTableCellNode)(h);(0,pe.$removeTableRowAtIndex)(e,n),b(),t()}))}),[c,h,b,t]),w=(0,a.useCallback)((function(){c.update((function(){(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h).remove(),b(),t()}))}),[c,h,b,t]),y=(0,a.useCallback)((function(){c.update((function(){var e=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h),n=(0,pe.$getTableColumnIndexFromTableCellNode)(h);(0,pe.$deleteTableColumn)(e,n),b(),t()}))}),[c,h,b,t]),_=(0,a.useCallback)((function(){c.update((function(){var e=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h),n=(0,pe.$getTableRowIndexFromTableCellNode)(h),r=e.getChildren();if(n>=r.length||n<0)throw new Error("Expected table cell to be inside of table row.");var a=r[n];if(!(0,pe.$isTableRowNode)(a))throw new Error("Expected table row");a.getChildren().forEach((function(e){if(!(0,pe.$isTableCellNode)(e))throw new Error("Expected table cell");e.toggleHeaderStyle(pe.TableCellHeaderStates.ROW)})),b(),t()}))}),[c,h,b,t]),k=(0,a.useCallback)((function(){c.update((function(){for(var e=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(h),n=(0,pe.$getTableColumnIndexFromTableCellNode)(h),r=e.getChildren(),a=0;a<r.length;a++){var o=r[a];if(!(0,pe.$isTableRowNode)(o))throw new Error("Expected table row");var i=o.getChildren();if(n>=i.length||n<0)throw new Error("Expected table cell to be inside of table row.");var s=i[n];if(!(0,pe.$isTableCellNode)(s))throw new Error("Expected table cell");s.toggleHeaderStyle(pe.TableCellHeaderStates.COLUMN)}b(),t()}))}),[c,h,b,t]);return(0,se.createPortal)((0,s.jsxs)("div",{className:"dropdown",ref:u,onClick:function(e){e.stopPropagation()},children:[(0,s.jsx)("button",{className:"item",onClick:function(){return N(!1)},children:(0,s.jsxs)("span",{className:"text",children:["Insert"," ",1===g.rows?"row":"".concat(g.rows," rows")," ","above"]})}),(0,s.jsx)("button",{className:"item",onClick:function(){return N(!0)},children:(0,s.jsxs)("span",{className:"text",children:["Insert"," ",1===g.rows?"row":"".concat(g.rows," rows")," ","below"]})}),(0,s.jsx)("hr",{}),(0,s.jsx)("button",{className:"item",onClick:function(){return C(!1)},children:(0,s.jsxs)("span",{className:"text",children:["Insert"," ",1===g.columns?"column":"".concat(g.columns," columns")," ","left"]})}),(0,s.jsx)("button",{className:"item",onClick:function(){return C(!0)},children:(0,s.jsxs)("span",{className:"text",children:["Insert"," ",1===g.columns?"column":"".concat(g.columns," columns")," ","right"]})}),(0,s.jsx)("hr",{}),(0,s.jsx)("button",{className:"item",onClick:function(){return y()},children:(0,s.jsx)("span",{className:"text",children:"Delete column"})}),(0,s.jsx)("button",{className:"item",onClick:function(){return j()},children:(0,s.jsx)("span",{className:"text",children:"Delete row"})}),(0,s.jsx)("button",{className:"item",onClick:function(){return w()},children:(0,s.jsx)("span",{className:"text",children:"Delete table"})}),(0,s.jsx)("hr",{}),(0,s.jsx)("button",{className:"item",onClick:function(){return _()},children:(0,s.jsxs)("span",{className:"text",children:[(h.__headerState&pe.TableCellHeaderStates.ROW)===pe.TableCellHeaderStates.ROW?"Remove":"Add"," ","row header"]})}),(0,s.jsx)("button",{className:"item",onClick:function(){return k()},children:(0,s.jsxs)("span",{className:"text",children:[(h.__headerState&pe.TableCellHeaderStates.COLUMN)===pe.TableCellHeaderStates.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function De(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0],n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useState)(!1),l=(0,r.Z)(i,2),c=l[0],u=l[1],d=(0,a.useState)(null),f=(0,r.Z)(d,2),h=f[0],m=f[1],p=(0,a.useCallback)((function(){var e=n.current,r=(0,ie.$getSelection)(),a=window.getSelection(),o=document.activeElement;if(null!=r&&null!=e){var i=t.getRootElement();if((0,ie.$isRangeSelection)(r)&&null!==i&&null!==a&&i.contains(a.anchorNode)){var s=(0,pe.$getTableCellNodeFromLexicalNode)(r.anchor.getNode());if(null==s)return void m(null);if(null==t.getElementByKey(s.getKey()))return void m(null);m(s)}else o||m(null)}else m(null)}),[t]);(0,a.useEffect)((function(){return t.registerUpdateListener((function(){t.getEditorState().read((function(){p()}))}))})),(0,a.useEffect)((function(){var e=n.current;if(null!=e&&null!=h){var r=t.getElementByKey(h.getKey());if(null!=r){var a=r.getBoundingClientRect(),o=e.getBoundingClientRect();e.style.opacity="1",e.style.left="".concat(a.left+window.pageXOffset-o.width+a.width-10,"px"),e.style.top="".concat(a.top+window.pageYOffset+5,"px")}else e.style.opacity="0"}}),[n,h,t]);var x=(0,a.useRef)(h);return(0,a.useEffect)((function(){x.current!==h&&u(!1),x.current=h}),[x,h]),(0,s.jsx)("div",{className:"table-cell-action-button-container",ref:n,children:null!=h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"table-cell-action-button chevron-down",onClick:function(e){e.stopPropagation(),u(!c)},ref:o,children:(0,s.jsx)("i",{className:"chevron-down"})}),c&&(0,s.jsx)(Pe,{contextRef:o,setIsMenuOpen:u,onClose:function(){return u(!1)},tableCellNode:h})]})})}function $e(){return(0,se.createPortal)((0,s.jsx)(De,{}),document.body)}Oe.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var Fe=n(4195);function ze(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,s.jsx)(Fe.TreeView,{viewClassName:"tree-view-output",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",editor:t})}var He=n(4588);function Be(e){var t=e.className;return(0,s.jsx)(He.ContentEditable,{className:t||"ContentEditable__root"})}function qe(e,t,n){return Math.min(Math.max(e,t),n)}var Ue=1,We=8,Ye=2,Ke=4;function Ge(e){var t=e.onResizeStart,n=e.onResizeEnd,r=e.imageRef,o=e.maxWidth,i=e.editor,l=e.showCaption,c=e.setShowCaption,u=(0,a.useRef)(null),d=(0,a.useRef)(null),f=(0,a.useRef)({priority:"",value:"default"}),h=(0,a.useRef)({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),m=i.getRootElement(),p=o||(null!==m?m.getBoundingClientRect().width-20:100),x=null!==m?m.getBoundingClientRect().height-20:100,g=function(e,n){var a=r.current,o=d.current;if(null!==a&&null!==o){var i=a.getBoundingClientRect(),s=i.width,l=i.height,c=h.current;c.startWidth=s,c.startHeight=l,c.ratio=s/l,c.currentWidth=s,c.currentHeight=l,c.startX=e.clientX,c.startY=e.clientY,c.isResizing=!0,c.direction=n,function(e){var t=e===Ue||e===Ke?"ew":e===We||e===Ye?"ns":e&We&&e&Ke||e&Ye&&e&Ue?"nwse":"nesw";null!==m&&m.style.setProperty("cursor","".concat(t,"-resize"),"important"),null!==document.body&&(document.body.style.setProperty("cursor","".concat(t,"-resize"),"important"),f.current.value=document.body.style.getPropertyValue("-webkit-user-select"),f.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important"))}(n),t(),o.classList.add("image-control-wrapper--resizing"),a.style.height="".concat(l,"px"),a.style.width="".concat(s,"px"),document.addEventListener("pointermove",v),document.addEventListener("pointerup",b)}},v=function(e){var t=r.current,n=h.current,a=n.direction&(Ue|Ke),o=n.direction&(Ye|We);if(null!==t&&n.isResizing)if(a&&o){var i=Math.floor(n.startX-e.clientX);i=n.direction&Ue?-i:i;var s=qe(n.startWidth+i,100,p),l=s/n.ratio;t.style.width="".concat(s,"px"),t.style.height="".concat(l,"px"),n.currentHeight=l,n.currentWidth=s}else if(o){var c=Math.floor(n.startY-e.clientY);c=n.direction&Ye?-c:c;var u=qe(n.startHeight+c,100,x);t.style.height="".concat(u,"px"),n.currentHeight=u}else{var d=Math.floor(n.startX-e.clientX);d=n.direction&Ue?-d:d;var f=qe(n.startWidth+d,100,p);t.style.width="".concat(f,"px"),n.currentWidth=f}},b=function e(){var t=r.current,a=h.current,o=d.current;if(null!==t&&null!==o&&a.isResizing){var i=a.currentWidth,s=a.currentHeight;a.startWidth=0,a.startHeight=0,a.ratio=0,a.startX=0,a.startY=0,a.currentWidth=0,a.currentHeight=0,a.isResizing=!1,o.classList.remove("image-control-wrapper--resizing"),null!==m&&m.style.setProperty("cursor","default"),null!==document.body&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",f.current.value,f.current.priority)),n(i,s),document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",e)}};return(0,s.jsxs)("div",{ref:d,children:[!l&&(0,s.jsx)("button",{className:"image-caption-button",ref:u,onClick:function(){c(!l)},children:"Add Caption"}),(0,s.jsx)("div",{className:"image-resizer image-resizer-n",onPointerDown:function(e){g(e,We)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-ne",onPointerDown:function(e){g(e,We|Ue)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-e",onPointerDown:function(e){g(e,Ue)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-se",onPointerDown:function(e){g(e,Ye|Ue)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-s",onPointerDown:function(e){g(e,Ye)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-sw",onPointerDown:function(e){g(e,Ye|Ke)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-w",onPointerDown:function(e){g(e,Ke)}}),(0,s.jsx)("div",{className:"image-resizer image-resizer-nw",onPointerDown:function(e){g(e,We|Ke)}})]})}function Xe(e){var t=e.children,n=e.className;return(0,s.jsx)("div",{className:n||"Placeholder__root",children:t})}var Je=new Set;function Ve(e){return e instanceof HTMLImageElement?{node:nt({altText:e.alt,src:e.src})}:null}function Qe(e){var t=e.altText,n=e.className,r=e.imageRef,a=e.src,o=e.width,i=e.height,l=e.maxWidth;return function(e){if(!Je.has(e))throw new Promise((function(t){var n=new Image;n.src=e,n.onload=function(){Je.add(e),t(null)}}))}(a),(0,s.jsx)("img",{className:n||void 0,src:a,alt:t,ref:r,style:{height:i,maxWidth:l,width:o},draggable:"false"})}function et(e){var t=e.src,n=e.altText,o=e.nodeKey,i=e.width,l=e.height,c=e.maxWidth,u=e.resizable,d=e.showCaption,f=e.caption,h=(0,a.useRef)(null),m=(0,Ie.useLexicalNodeSelection)(o),p=(0,r.Z)(m,3),x=p[0],g=p[1],v=p[2],b=(0,a.useState)(!1),N=(0,r.Z)(b,2),C=N[0],j=N[1],w=(0,ne.useCollaborationContext)().yjsDocMap,y=(0,re.useLexicalComposerContext)(),_=(0,r.Z)(y,1)[0],k=(w.get("main"),(0,a.useState)(null)),E=(0,r.Z)(k,2),T=E[0],S=E[1],I=(0,a.useCallback)((function(e){if(x&&(0,ie.$isNodeSelection)((0,ie.$getSelection)())){e.preventDefault();var t=(0,ie.$getNodeByKey)(o);rt(t)&&t.remove(),g(!1)}return!1}),[x,o,g]);(0,a.useEffect)((function(){return(0,ae.mergeRegister)(_.registerUpdateListener((function(e){var t=e.editorState;S(t.read((function(){return(0,ie.$getSelection)()})))})),_.registerCommand(ie.CLICK_COMMAND,(function(e){var t=e;return!!C||t.target===h.current&&(t.shiftKey||v(),g(!x),!0)}),ie.COMMAND_PRIORITY_LOW),_.registerCommand(ie.KEY_DELETE_COMMAND,I,ie.COMMAND_PRIORITY_LOW),_.registerCommand(ie.KEY_BACKSPACE_COMMAND,I,ie.COMMAND_PRIORITY_LOW))}),[v,_,C,x,o,I,g]);var Z=U().historyState,R=F().settings.showNestedEditorTreeView,M=x&&(0,ie.$isNodeSelection)(T),O=(0,ie.$isNodeSelection)(T)&&(x||C);return(0,s.jsx)(a.Suspense,{fallback:null,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{draggable:M,children:(0,s.jsx)(Qe,{className:O?"focused":null,src:t,altText:n,imageRef:h,width:i,height:l,maxWidth:c})}),d&&(0,s.jsx)("div",{className:"image-caption-container",children:(0,s.jsxs)(Se.LexicalNestedComposer,{initialEditor:f,children:[(0,s.jsx)(V.TablePlugin,{}),(0,s.jsx)($e,{}),(0,s.jsx)(Me,{}),(0,s.jsx)(G.LinkPlugin,{}),(0,s.jsx)(H.HistoryPlugin,{externalHistoryState:Z}),(0,s.jsx)(J.RichTextPlugin,{contentEditable:(0,s.jsx)(Be,{className:"ImageNode__contentEditable"}),placeholder:(0,s.jsx)(Xe,{className:"ImageNode__placeholder",children:"Enter a caption..."}),initialEditorState:null}),!0===R?(0,s.jsx)(ze,{}):null]})}),u&&O&&(0,s.jsx)(Ge,{showCaption:d,setShowCaption:function(){_.update((function(){var e=(0,ie.$getNodeByKey)(o);rt(e)&&e.setShowCaption(!0)}))},editor:_,imageRef:h,maxWidth:c,onResizeStart:function(){j(!0)},onResizeEnd:function(e,t){setTimeout((function(){j(!1)}),200),_.update((function(){var n=(0,ie.$getNodeByKey)(o);rt(n)&&n.setWidthAndHeight(e,t)}))}})]})})}var tt=function(e){(0,ve.Z)(n,e);var t=(0,be.Z)(n);function n(e,r,a,o,i,s,l,c){var u;return(0,xe.Z)(this,n),(u=t.call(this,c)).__src=void 0,u.__altText=void 0,u.__width=void 0,u.__height=void 0,u.__maxWidth=void 0,u.__showCaption=void 0,u.__caption=void 0,u.__src=e,u.__altText=r,u.__maxWidth=a,u.__width=o||"inherit",u.__height=i||"inherit",u.__showCaption=s||!1,u.__caption=l||(0,ie.createEditor)(),u}return(0,ge.Z)(n,[{key:"exportDOM",value:function(){var e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),{element:e}}},{key:"exportJSON",value:function(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:"inherit"===this.__height?0:this.__height,maxWidth:this.__maxWidth,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:"inherit"===this.__width?0:this.__width}}},{key:"setWidthAndHeight",value:function(e,t){var n=this.getWritable();n.__width=e,n.__height=t}},{key:"setShowCaption",value:function(e){this.getWritable().__showCaption=e}},{key:"createDOM",value:function(e){var t=document.createElement("span"),n=e.theme.image;return void 0!==n&&(t.className=n),t}},{key:"updateDOM",value:function(){return!1}},{key:"getSrc",value:function(){return this.__src}},{key:"getAltText",value:function(){return this.__altText}},{key:"decorate",value:function(){return(0,s.jsx)(et,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,maxWidth:this.__maxWidth,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,resizable:!0})}}],[{key:"getType",value:function(){return"image"}},{key:"clone",value:function(e){return new n(e.__src,e.__altText,e.__maxWidth,e.__width,e.__height,e.__showCaption,e.__caption,e.__key)}},{key:"importJSON",value:function(e){var t=e.altText,n=e.height,r=e.width,a=e.maxWidth,o=e.caption,i=e.src,s=nt({altText:t,height:n,maxWidth:a,showCaption:e.showCaption,src:i,width:r}),l=s.__caption,c=l.parseEditorState(o.editorState);return c.isEmpty()||l.setEditorState(c),s}},{key:"importDOM",value:function(){return{img:function(e){return{conversion:Ve,priority:0}}}}}]),n}(ie.DecoratorNode);function nt(e){var t=e.altText,n=e.height,r=e.maxWidth,a=void 0===r?500:r,o=e.src,i=e.width,s=e.showCaption,l=e.caption,c=e.key;return new tt(o,t,a,i,n,s,l,c)}function rt(e){return e instanceof tt}var at=/^(?:\|)(.+)(?:\|)\s?$/,ot={export:function(e,t){if(!(0,pe.$isTableNode)(e))return null;var n,r=[],a=(0,he.Z)(e.getChildren());try{for(a.s();!(n=a.n()).done;){var o=n.value,i=[];if((0,pe.$isTableRowNode)(o)){var s,l=(0,he.Z)(o.getChildren());try{for(l.s();!(s=l.n()).done;){var c=s.value;(0,ie.$isElementNode)(c)&&i.push(t(c))}}catch(u){l.e(u)}finally{l.f()}}r.push("| ".concat(i.join(" | ")," |"))}}catch(u){a.e(u)}finally{a.f()}return r.join("\n")},regExp:at,replace:function(e,t,n){var r=st(n[0]);if(null!=r){for(var a=[r],o=e.getPreviousSibling(),i=r.length;o&&(0,ie.$isParagraphNode)(o)&&1===o.getChildrenSize();){var s=o.getFirstChild();if(!(0,ie.$isTextNode)(s))break;var l=st(s.getTextContent());if(null==l)break;i=Math.max(i,l.length),a.unshift(l);var c=o.getPreviousSibling();o.remove(),o=c}for(var u=(0,pe.$createTableNode)(),d=0,f=a;d<f.length;d++){var m=f[d],p=(0,pe.$createTableRowNode)();u.append(p);for(var x=0;x<i;x++)p.append(x<m.length?m[x]:it(null))}var g=e.getPreviousSibling();(0,pe.$isTableNode)(g)&&function(e){var t=e.getFirstChild();return(0,pe.$isTableRowNode)(t)?t.getChildrenSize():0}(g)===i?(g.append.apply(g,(0,h.Z)(u.getChildren())),e.remove()):e.replace(u),u.selectEnd()}},type:"element"};var it=function(e){var t=(0,pe.$createTableCellNode)(pe.TableCellHeaderStates.NO_STATUS),n=(0,ie.$createParagraphNode)();return null!=e&&n.append((0,ie.$createTextNode)(e.trim())),t.append(n),t},st=function(e){var t=e.match(at);return t&&t[1]?t[1].split("|").map((function(e){return it(e)})):null},lt=[ot,{export:function(e){return(0,me.$isHorizontalRuleNode)(e)?"***":null},regExp:/^(---|\*\*\*|___)\s?$/,replace:function(e,t,n,r){var a=(0,me.$createHorizontalRuleNode)();r||null!=e.getNextSibling()?e.replace(a):e.insertBefore(a),a.selectNext()},type:"element"},{export:function(e,t,n){return rt(e)?"![".concat(e.getAltText(),"](").concat(e.getSrc(),")"):null},importRegExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))/,regExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))$/,replace:function(e,t){var n=(0,r.Z)(t,3),a=nt({altText:n[1],maxWidth:800,src:n[2]});e.replace(a)},trigger:")",type:"text-match"},{export:function(e,t,n){return Te(e)?"$".concat(e.getEquation(),"$"):null},importRegExp:/\$([^$].+?)\$/,regExp:/\$([^$].+?)\$$/,replace:function(e,t){var n=Ee((0,r.Z)(t,2)[1],!0);e.replace(n)},trigger:"$",type:"text-match"},te.CHECK_LIST].concat((0,h.Z)(te.ELEMENT_TRANSFORMERS),(0,h.Z)(te.TEXT_FORMAT_TRANSFORMERS),(0,h.Z)(te.TEXT_MATCH_TRANSFORMERS));function ct(e){e.isRichText;var t=(0,re.useLexicalComposerContext)(),n=(0,r.Z)(t,1)[0],o=(0,a.useState)((function(){return n.isReadOnly()})),i=(0,r.Z)(o,2),l=i[0],c=i[1],u=(0,a.useState)(!1),d=(0,r.Z)(u,2),f=(d[0],d[1]),h=(0,a.useState)(!0),m=(0,r.Z)(h,2),p=m[0],x=m[1],g=ue(),v=(0,r.Z)(g,2),b=v[0],N=v[1];(0,ne.useCollaborationContext)().yjsDocMap.get("main");(0,a.useEffect)((function(){return(0,ae.mergeRegister)(n.registerReadOnlyListener((function(e){c(e)})),n.registerCommand(oe.CONNECTED_COMMAND,(function(e){return f(e),!1}),ie.COMMAND_PRIORITY_EDITOR))}),[n]),(0,a.useEffect)((function(){return n.registerUpdateListener((function(){n.getEditorState().read((function(){var e=(0,ie.$getRoot)().getChildren();if(e.length>1)x(!1);else if((0,ie.$isParagraphNode)(e[0])){var t=e[0].getChildren();x(0===t.length)}else x(!1)}))}))}),[n]);(0,a.useCallback)((function(){n.update((function(){var e=(0,ie.$getRoot)(),t=e.getFirstChild();if((0,Q.$isCodeNode)(t)&&"markdown"===t.getLanguage())(0,te.$convertFromMarkdownString)(t.getTextContent(),lt);else{var n=(0,te.$convertToMarkdownString)(lt);e.clear().append((0,Q.$createCodeNode)("markdown").append((0,ie.$createTextNode)(n)))}e.selectEnd()}))}),[n]);return(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)("button",{className:"action-button import",onClick:function(){return(0,ee.importFile)(n)},title:"Import","aria-label":"Import editor state from JSON",children:(0,s.jsx)("i",{className:"import"})}),(0,s.jsx)("button",{className:"action-button export",onClick:function(){return(0,ee.exportFile)(n,{fileName:"Playground ".concat((new Date).toISOString()),source:"Playground"})},title:"Export","aria-label":"Export editor state to JSON",children:(0,s.jsx)("i",{className:"export"})}),(0,s.jsx)("button",{className:"action-button clear",disabled:p,onClick:function(){N("Clear editor",(function(e){return(0,s.jsx)(ut,{editor:n,onClose:e})}))},title:"Clear","aria-label":"Clear editor contents",children:(0,s.jsx)("i",{className:"clear"})}),(0,s.jsx)("button",{className:"action-button ".concat(l?"unlock":"lock"),onClick:function(){n.setReadOnly(!n.isReadOnly())},title:"Read-Only Mode","aria-label":"".concat(l?"Unlock":"Lock"," read-only mode"),children:(0,s.jsx)("i",{className:l?"unlock":"lock"})}),b]})}function ut(e){var t=e.editor,n=e.onClose;return(0,s.jsxs)(s.Fragment,{children:["Are you sure you want to clear the editor?",(0,s.jsxs)("div",{className:"Modal__content",children:[(0,s.jsx)(fe,{onClick:function(){t.dispatchCommand(ie.CLEAR_EDITOR_COMMAND,void 0),t.focus(),n()},children:"Clear"})," ",(0,s.jsx)(fe,{onClick:function(){t.focus(),n()},children:"Cancel"})]})]})}var dt=n(5544),ft=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,ht=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,mt=[function(e){var t=ft.exec(e);if(null===t)return null;var n=t[0];return{index:t.index,length:n.length,text:n,url:n.startsWith("http")?n:"https://".concat(n)}},function(e){var t=ht.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:"mailto:".concat(t[0])}}];function pt(){return(0,s.jsx)(dt.AutoLinkPlugin,{matchers:mt})}var xt=n(1577);function gt(e){var t=e.filter,n=e.newTab,o=void 0===n||n,i=(0,re.useLexicalComposerContext)(),s=(0,r.Z)(i,1)[0];return(0,a.useEffect)((function(){function e(e){var n=e,r=function(e,t){return t.getEditorState().read((function(){var t=e.target;return vt(t)?t:t.parentNode&&vt(t.parentNode)?t.parentNode:null}))}(n,s);if(null!==r){var a=r.getAttribute("href");if("false"!==r.getAttribute("contenteditable")&&void 0!==a){var i=s.getEditorState().read(ie.$getSelection);if(!(0,ie.$isRangeSelection)(i)||i.isCollapsed()){var l=null;if(s.update((function(){var e=(0,ie.$getNearestNodeFromDOMNode)(r);(0,xt.$isLinkNode)(e)&&(l=e)})),null!==l&&(void 0===t||t(n,l)))try{null!==a&&window.open(a,o||n.metaKey||n.ctrlKey?"_blank":"_self")}catch(c){}}}}}return s.registerRootListener((function(t,n){null!==n&&n.removeEventListener("click",e),null!==t&&t.addEventListener("click",e)}))}),[s,t,o]),null}function vt(e){return"a"===e.nodeName.toLowerCase()}var bt=n(2878);function Nt(e,t,n){var r=(0,a.useRef)(null);return r.current=e,(0,a.useMemo)((function(){return(0,bt.Z)((function(){r.current&&r.current.apply(r,arguments)}),t,{maxWait:n})}),[t,n])}function Ct(e){var t=e.editor,n=e.getCodeDOMNode,o=(0,a.useState)(!1),i=(0,r.Z)(o,2),l=i[0],c=i[1],u=Nt((function(){c(!1)}),1e3);function h(){return(h=(0,f.Z)((0,d.Z)().mark((function e(){var r,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n()){e.next=3;break}return e.abrupt("return");case 3:return a="",t.update((function(){var e=(0,ie.$getNearestNodeFromDOMNode)(r);(0,Q.$isCodeNode)(e)&&(a=e.getTextContent());var t=(0,ie.$getSelection)();(0,ie.$setSelection)(t)})),e.prev=5,e.next=8,navigator.clipboard.writeText(a);case 8:c(!0),u(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Failed to copy: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return(0,s.jsx)("button",{className:"menu-item",onClick:function(){return h.apply(this,arguments)},"aria-label":"copy",children:l?(0,s.jsx)("i",{className:"format success"}):(0,s.jsx)("i",{className:"format copy"})})}function jt(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0],n=(0,a.useState)(""),o=(0,r.Z)(n,2),i=o[0],l=o[1],c=(0,a.useState)(!1),u=(0,r.Z)(c,2),d=u[0],f=u[1],h=(0,a.useState)(!1),p=(0,r.Z)(h,2),x=p[0],g=p[1],v=(0,a.useState)({right:"0",top:"0"}),b=(0,r.Z)(v,2),N=b[0],C=b[1],j=(0,a.useRef)(new Set),w=(0,a.useRef)(null);var y=Nt((function(e){var n=function(e){var t=e.target;if(t&&t instanceof HTMLElement){var n=t.closest("code.PlaygroundEditorTheme__code");return{codeDOMNode:n,isOutside:!(n||t.closest("div.code-action-menu-container"))}}return{codeDOMNode:null,isOutside:!0}}(e),r=n.codeDOMNode;if(n.isOutside)f(!1);else if(r){w.current=r;var a=null,o="";if(t.update((function(){var e=(0,ie.$getNearestNodeFromDOMNode)(r);(0,Q.$isCodeNode)(e)&&(o=(a=e).getLanguage()||"")})),a){var i=r.getBoundingClientRect(),s=i.y,c=i.right;l(o),f(!0),C({right:"".concat(window.innerWidth-c+8-window.pageXOffset,"px"),top:"".concat(s+window.pageYOffset,"px")})}}}),50,1e3);(0,a.useEffect)((function(){if(x)return document.addEventListener("mousemove",y),function(){f(!1),y.cancel(),document.removeEventListener("mousemove",y)}}),[x,y]),t.registerMutationListener(Q.CodeNode,(function(e){t.update((function(){var t,n=(0,he.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=(0,r.Z)(t.value,2),o=a[0];switch(a[1]){case"created":j.current.add(o),g(j.current.size>0);break;case"destroyed":j.current.delete(o),g(j.current.size>0)}}}catch(i){n.e(i)}finally{n.f()}}))}));var _=(0,Q.getLanguageFriendlyName)(i);return(0,s.jsx)(s.Fragment,{children:d?(0,s.jsxs)("div",{className:"code-action-menu-container",style:(0,m.Z)({},N),children:[(0,s.jsx)("div",{className:"code-highlight-language",children:_}),(0,s.jsx)(Ct,{editor:t,getCodeDOMNode:function(){return w.current}})]}):null})}function wt(){return(0,se.createPortal)((0,s.jsx)(jt,{}),document.body)}function yt(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useEffect)((function(){return(0,Q.registerCodeHighlighting)(t)}),[t]),null}var _t=n(7326),kt=n(6868),Et=n(2509),Tt=n(9473),St=n(9689),It=n.p+"static/media/cat-typing.492cbad77b5fa1f269cf.gif",Zt=n(3110),Rt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Mt=Rt&&"documentMode"in document?document.documentMode:null,Ot=Rt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),At=(Rt&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),!(!Rt||!("InputEvent"in window)||Mt)&&new window.InputEvent("input"),Rt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Rt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,n.p+"static/media/yellow-flower.41b8cfa32f4392503934.jpg"),Lt=n(1752),Pt=n(1120),Dt=n(4349);function $t(e){var t=e.className,n=e.format,r=e.nodeKey,a=e.videoID;return(0,s.jsx)(Dt.BlockWithAlignableContents,{className:t,format:n,nodeKey:r,children:(0,s.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(a),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"})})}var Ft=function(e){(0,ve.Z)(n,e);var t=(0,be.Z)(n);function n(e,r,a){var o;return(0,xe.Z)(this,n),(o=t.call(this,r,a)).__id=void 0,o.__id=e,o}return(0,ge.Z)(n,[{key:"exportJSON",value:function(){return(0,m.Z)((0,m.Z)({},(0,Lt.Z)((0,Pt.Z)(n.prototype),"exportJSON",this).call(this)),{},{type:"youtube",version:1,videoID:this.__id})}},{key:"updateDOM",value:function(){return!1}},{key:"getId",value:function(){return this.__id}},{key:"decorate",value:function(e,t){var n=t.theme.embedBlock||{},r={base:n.base||"",focus:n.focus||""};return(0,s.jsx)($t,{className:r,format:this.__format,nodeKey:this.getKey(),videoID:this.__id})}},{key:"isTopLevel",value:function(){return!0}}],[{key:"getType",value:function(){return"youtube"}},{key:"clone",value:function(e){return new n(e.__id,e.__format,e.__key)}},{key:"importJSON",value:function(e){var t=zt(e.videoID);return t.setFormat(e.format),t}}]),n}(Zt.DecoratorBlockNode);function zt(e){return new Ft(e)}var Ht=n(5987),Bt=a.createContext(null);function qt(e){var t=e.children,n=e.className,r=e.onClick,o=e.title,i=(0,a.useRef)(null),l=a.useContext(Bt);if(null===l)throw new Error("DropDownItem must be used within a DropDown");var c=l.registerItem;return(0,a.useEffect)((function(){i&&i.current&&c(i)}),[i,c]),(0,s.jsx)("button",{className:n,onClick:r,ref:i,title:o,children:t})}function Ut(e){var t=e.children,n=e.dropDownRef,o=e.onClose,i=(0,a.useState)(),l=(0,r.Z)(i,2),c=l[0],u=l[1],d=(0,a.useState)(),f=(0,r.Z)(d,2),m=f[0],p=f[1],x=(0,a.useCallback)((function(e){u((function(t){return t?[].concat((0,h.Z)(t),[e]):[e]}))}),[u]),g=(0,a.useMemo)((function(){return{registerItem:x}}),[x]);return(0,a.useEffect)((function(){c&&!m&&p(c[0]),m&&m.current&&m.current.focus()}),[c,m]),(0,s.jsx)(Bt.Provider,{value:g,children:(0,s.jsx)("div",{className:"dropdown",ref:n,onKeyDown:function(e){if(c){var t=e.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(t)&&e.preventDefault(),"Escape"===t||"Tab"===t?o():"ArrowUp"===t?p((function(e){if(!e)return c[0];var t=c.indexOf(e)-1;return c[-1===t?c.length-1:t]})):"ArrowDown"===t&&p((function(e){return e?c[c.indexOf(e)+1]:c[0]}))}},children:t})})}function Wt(e){var t=e.buttonLabel,n=e.buttonAriaLabel,o=e.buttonClassName,i=e.buttonIconClassName,l=e.children,c=e.stopCloseOnClickSelf,u=(0,a.useRef)(null),d=(0,a.useRef)(null),f=(0,a.useState)(!1),h=(0,r.Z)(f,2),m=h[0],p=h[1];return(0,a.useEffect)((function(){var e=d.current,t=u.current;if(m&&null!==e&&null!==t){var n=e.getBoundingClientRect(),r=n.top,a=n.left;t.style.top="".concat(r+40,"px"),t.style.left="".concat(Math.min(a,window.innerWidth-t.offsetWidth-20),"px")}}),[u,d,m]),(0,a.useEffect)((function(){var e=d.current;if(null!==e&&m){var t=function(t){var n=t.target;c&&u.current&&u.current.contains(n)||e.contains(n)||p(!1)};return document.addEventListener("click",t),function(){document.removeEventListener("click",t)}}}),[u,d,m,c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{"aria-label":n||t,className:o,onClick:function(){return p(!m)},ref:d,children:[i&&(0,s.jsx)("span",{className:i}),t&&(0,s.jsx)("span",{className:"text dropdown-button-text",children:t}),(0,s.jsx)("i",{className:"chevron-down"})]}),m&&(0,se.createPortal)((0,s.jsx)(Ut,{dropDownRef:u,onClose:function(){p(!1),d&&d.current&&d.current.focus()},children:l}),document.body)]})}function Yt(e){var t=e.label,n=e.value,r=e.onChange,a=e.placeholder,o=void 0===a?"":a,i=e["data-test-id"];return(0,s.jsxs)("div",{className:"Input__wrapper",children:[(0,s.jsx)("label",{className:"Input__label",children:t}),(0,s.jsx)("input",{type:"text",className:"Input__input",placeholder:o,value:n,onChange:function(e){r(e.target.value)},"data-test-id":i})]})}var Kt=["color","children","onChange"],Gt=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"],Xt=214;function Jt(e){var t=e.color,n=e.children,o=e.onChange,i=(0,Ht.Z)(e,Kt),l=(0,a.useState)(an("hex",t)),c=(0,r.Z)(l,2),u=c[0],d=c[1],f=(0,a.useState)(t),h=(0,r.Z)(f,2),p=h[0],x=h[1],g=(0,a.useRef)(null),v=(0,a.useMemo)((function(){return{x:u.hsv.s/100*Xt,y:(100-u.hsv.v)/100*150}}),[u.hsv.s,u.hsv.v]),b=(0,a.useMemo)((function(){return{x:u.hsv.h/360*Xt}}),[u.hsv]);return(0,a.useEffect)((function(){null!==g.current&&o&&(o(u.hex),x(u.hex))}),[u,o]),(0,a.useEffect)((function(){if(void 0!==t){var e=an("hex",t);d(e),x(e.hex)}}),[t]),(0,s.jsxs)(Wt,(0,m.Z)((0,m.Z)({},i),{},{stopCloseOnClickSelf:!0,children:[(0,s.jsxs)("div",{className:"color-picker-wrapper",style:{width:Xt},ref:g,children:[(0,s.jsx)(Yt,{label:"Hex",onChange:function(e){if(x(e),/^#[0-9A-Fa-f]{6}$/i.test(e)){var t=an("hex",e);d(t)}},value:p}),(0,s.jsx)("div",{className:"color-picker-basic-color",children:Gt.map((function(e){return(0,s.jsx)("button",{className:e===u.hex?" active":"",style:{backgroundColor:e},onClick:function(){x(e),d(an("hex",e))}},e)}))}),(0,s.jsx)(Vt,{className:"color-picker-saturation",style:{backgroundColor:"hsl(".concat(u.hsv.h,", 100%, 50%)")},onChange:function(e){var t=e.x,n=e.y,r=an("hsv",(0,m.Z)((0,m.Z)({},u.hsv),{},{s:t/Xt*100,v:100-n/150*100}));d(r),x(r.hex)},children:(0,s.jsx)("div",{className:"color-picker-saturation_cursor",style:{backgroundColor:u.hex,left:v.x,top:v.y}})}),(0,s.jsx)(Vt,{className:"color-picker-hue",onChange:function(e){var t=e.x,n=an("hsv",(0,m.Z)((0,m.Z)({},u.hsv),{},{h:t/Xt*360}));d(n),x(n.hex)},children:(0,s.jsx)("div",{className:"color-picker-hue_cursor",style:{backgroundColor:"hsl(".concat(u.hsv.h,", 100%, 50%)"),left:b.x}})}),(0,s.jsx)("div",{className:"color-picker-color",style:{backgroundColor:u.hex}})]}),n]}))}function Vt(e){var t=e.className,n=e.style,r=e.onChange,o=e.children,i=(0,a.useRef)(null),l=function(e){if(i.current){var t=i.current.getBoundingClientRect(),n=t.width,a=t.height,o=t.left,s=t.top,l=Qt(e.clientX-o,n,0),c=Qt(e.clientY-s,a,0);r({x:l,y:c})}};return(0,s.jsx)("div",{ref:i,className:t,style:n,onMouseDown:function(e){if(0===e.button){l(e);var t=function(e){l(e)};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",(function e(n){document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",e,!1),l(n)}),!1)}},children:o})}function Qt(e,t,n){return e>t?t:e<n?n:e}function en(e){if(!e.startsWith("#")){var t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("2d context not supported or canvas already initialized");return t.fillStyle=e,t.fillStyle}return 4===e.length||5===e.length?e=e.split("").map((function(e,t){return t?e+e:"#"})).join(""):7===e.length||9===e.length?e:"#000000"}function tn(e){var t=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return"#"+t+t+n+n+r+r})).substring(1).match(/.{2}/g)||[]).map((function(e){return parseInt(e,16)}));return{b:t[2],g:t[1],r:t[0]}}function nn(e){var t=e.r,n=e.g,r=e.b;t/=255,n/=255,r/=255;var a=Math.max(t,n,r),o=a-Math.min(t,n,r);return{h:o?60*(a===t?(n-r)/o+(n<r?6:0):a===n?2+(r-t)/o:4+(t-n)/o):0,s:a?o/a*100:0,v:100*a}}function rn(e){var t=e.b,n=e.g;return"#"+[e.r,n,t].map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function an(e,t){var n=en("#121212"),r=tn(n),a=nn(r);if("hex"===e)a=nn(r=tn(n=en(t)));else if("rgb"===e){n=rn(r=t),a=nn(r)}else if("hsv"===e){n=rn(r=function(e){var t=e.h,n=e.s,r=e.v,a=~~(t/60),o=t/60-a,i=(r/=100)*(1-(n/=100)),s=r*(1-n*o),l=r*(1-n*(1-o)),c=a%6,u=Math.round(255*[r,s,i,i,l,r][c]),d=Math.round(255*[l,r,r,s,i,i][c]);return{b:Math.round(255*[i,i,l,r,r,s][c]),g:d,r:u}}(a=t))}return{hex:n,hsv:a,rgb:r}}function on(e){var t=e.accept,n=e.label,r=e.onChange,a=e["data-test-id"];return(0,s.jsxs)("div",{className:"Input__wrapper",children:[(0,s.jsx)("label",{className:"Input__label",children:n}),(0,s.jsx)("input",{type:"file",accept:t,className:"Input__input",onChange:function(e){return r(e.target.files)},"data-test-id":a})]})}function sn(e){var t=e.onConfirm,n=e.initialEquation,o=void 0===n?"":n,i=(0,a.useState)(o),l=(0,r.Z)(i,2),c=l[0],u=l[1],d=(0,a.useState)(!0),f=(0,r.Z)(d,2),h=f[0],m=f[1],p=(0,a.useCallback)((function(){t(c,h)}),[t,c,h]),x=(0,a.useCallback)((function(){m(!h)}),[m,h]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"KatexEquationAlterer_defaultRow",children:["Inline",(0,s.jsx)("input",{type:"checkbox",checked:h,onChange:x})]}),(0,s.jsx)("div",{className:"KatexEquationAlterer_defaultRow",children:"Equation "}),(0,s.jsx)("div",{className:"KatexEquationAlterer_centerRow",children:h?(0,s.jsx)("input",{onChange:function(e){u(e.target.value)},value:c,className:"KatexEquationAlterer_textArea"}):(0,s.jsx)("textarea",{onChange:function(e){u(e.target.value)},value:c,className:"KatexEquationAlterer_textArea"})}),(0,s.jsx)("div",{className:"KatexEquationAlterer_defaultRow",children:"Visualization "}),(0,s.jsx)("div",{className:"KatexEquationAlterer_centerRow",children:(0,s.jsx)(ye,{equation:c,inline:!1,onClick:function(){return null}})}),(0,s.jsx)("div",{className:"KatexEquationAlterer_dialogActions",children:(0,s.jsx)(fe,{onClick:p,children:"Confirm"})})]})}var ln={},cn=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function un(e){var t=function(e){var t=ln[e];if(!e.match(cn))return{preview:null};if(t||(t=ln[e]=fetch("/api/link-preview?url=".concat(encodeURI(e))).then((function(e){return e.json()})).then((function(t){return ln[e]=t,t})).catch((function(){ln[e]={preview:null}}))),t instanceof Promise)throw t;return t}(e.url),n=t.preview;return null===n?null:(0,s.jsxs)("div",{className:"LinkPreview__container",children:[n.img&&(0,s.jsx)("div",{className:"LinkPreview__imageWrapper",children:(0,s.jsx)("img",{src:n.img,alt:n.title,className:"LinkPreview__image"})}),n.domain&&(0,s.jsx)("div",{className:"LinkPreview__domain",children:n.domain}),n.title&&(0,s.jsx)("div",{className:"LinkPreview__title",children:n.title}),n.description&&(0,s.jsx)("div",{className:"LinkPreview__description",children:n.description})]})}function dn(e){return(0,s.jsx)("div",(0,m.Z)((0,m.Z)({className:"LinkPreview__glimmer"},e),{},{style:(0,m.Z)({animationDelay:String(300*(e.index||0))},e.style||{})}))}function fn(e){var t=e.url;return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(dn,{style:{height:"80px"},index:0}),(0,s.jsx)(dn,{style:{width:"60%"},index:1}),(0,s.jsx)(dn,{style:{width:"80%"},index:2})]}),children:(0,s.jsx)(un,{url:t})})}n(8341);var hn=(0,ie.createCommand)();function mn(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useEffect)((function(){if(!t.hasNodes([ke]))throw new Error("EquationsPlugins: EquationsNode not registered on editor");return t.registerCommand(hn,(function(e){var t=e.equation,n=e.inline,r=(0,ie.$getSelection)();if((0,ie.$isRangeSelection)(r)){var a=Ee(t,n);r.insertNodes([a])}return!0}),ie.COMMAND_PRIORITY_EDITOR)}),[t]),null}var pn=(0,ie.createCommand)();function xn(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useEffect)((function(){if(!t.hasNodes([Ft]))throw new Error("YouTubePlugin: YouTubeNode not registered on editor");return t.registerCommand(pn,(function(e){var t=zt(e);return(0,ae.$insertBlockNode)(t),!0}),ie.COMMAND_PRIORITY_EDITOR)}),[t]),null}var gn={bullet:"Bulleted List",check:"Check List",code:"Code Block",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",number:"Numbered List",paragraph:"Normal",quote:"Quote"};var vn=function(){for(var e=[],t=0,n=Object.entries(Q.CODE_LANGUAGE_FRIENDLY_NAME_MAP);t<n.length;t++){var a=(0,r.Z)(n[t],2),o=a[0],i=a[1];e.push([o,i])}return e}(),bn=[["10px","10px"],["11px","11px"],["12px","12px"],["13px","13px"],["14px","14px"],["15px","15px"],["16px","16px"],["17px","17px"],["18px","18px"],["19px","19px"],["20px","20px"]];function Nn(e){var t=e.anchor,n=e.focus,r=e.anchor.getNode(),a=e.focus.getNode();return r===a?r:e.isBackward()?(0,St.$isAtNodeEnd)(n)?r:a:(0,St.$isAtNodeEnd)(t)?a:r}function Cn(e,t,n){if(null===t)e.style.opacity="0",e.style.top="-1000px",e.style.left="-1000px";else{e.style.opacity="1",e.style.top="".concat(t.top+t.height+window.pageYOffset+10,"px");var r=t.left-e.offsetWidth/2+t.width/2,a=n.getBoundingClientRect();a.left>r?e.style.left="".concat(t.left+window.pageXOffset,"px"):r+e.offsetWidth>a.right&&(e.style.left="".concat(t.right+window.pageXOffset-e.offsetWidth,"px"))}}function jn(e){var t=e.editor,n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useState)(""),l=(0,r.Z)(i,2),c=l[0],u=l[1],d=(0,a.useState)(!1),f=(0,r.Z)(d,2),h=f[0],m=f[1],p=(0,a.useState)(null),x=(0,r.Z)(p,2),g=x[0],v=x[1],b=(0,a.useCallback)((function(){var e=(0,ie.$getSelection)();if((0,ie.$isRangeSelection)(e)){var r=Nn(e),a=r.getParent();(0,xt.$isLinkNode)(a)?u(a.getURL()):(0,xt.$isLinkNode)(r)?u(r.getURL()):u("")}var o=n.current,i=window.getSelection(),s=document.activeElement;if(null!==o){var l=t.getRootElement();if(null!==e&&null!==i&&!i.isCollapsed&&null!==l&&l.contains(i.anchorNode)){var c,d=i.getRangeAt(0);if(i.anchorNode===l){for(var f=l;null!=f.firstElementChild;)f=f.firstElementChild;c=f.getBoundingClientRect()}else c=d.getBoundingClientRect();Cn(o,c,l),v(e)}else s&&"link-input"===s.className||(null!==l&&Cn(o,null,l),v(null),m(!1),u(""));return!0}}),[t]);return(0,a.useEffect)((function(){var e=function(){t.getEditorState().read((function(){b()}))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[t,b]),(0,a.useEffect)((function(){return(0,ae.mergeRegister)(t.registerUpdateListener((function(e){e.editorState.read((function(){b()}))})),t.registerCommand(ie.SELECTION_CHANGE_COMMAND,(function(){return b(),!0}),ie.COMMAND_PRIORITY_LOW))}),[t,b]),(0,a.useEffect)((function(){t.getEditorState().read((function(){b()}))}),[t,b]),(0,a.useEffect)((function(){h&&o.current&&o.current.focus()}),[h]),(0,s.jsx)("div",{ref:n,className:"link-editor",children:h?(0,s.jsx)("input",{ref:o,className:"link-input",value:c,onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key?(e.preventDefault(),null!==g&&(""!==c&&t.dispatchCommand(xt.TOGGLE_LINK_COMMAND,c),m(!1))):"Escape"===e.key&&(e.preventDefault(),m(!1))}}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"link-input",children:[(0,s.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:c}),(0,s.jsx)("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:function(e){return e.preventDefault()},onClick:function(){m(!0)}})]}),(0,s.jsx)(fn,{url:c})]})})}function wn(e){var t=e.onClick,n=(0,a.useState)(""),o=(0,r.Z)(n,2),i=o[0],l=o[1],c=(0,a.useState)(""),u=(0,r.Z)(c,2),d=u[0],f=u[1],h=""===i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Yt,{label:"Image URL",placeholder:"i.e. https://source.unsplash.com/random",onChange:l,value:i,"data-test-id":"image-modal-url-input"}),(0,s.jsx)(Yt,{label:"Alt Text",placeholder:"Random unsplash image",onChange:f,value:d,"data-test-id":"image-modal-alt-text-input"}),(0,s.jsx)("div",{className:"ToolbarPlugin__dialogActions",children:(0,s.jsx)(fe,{"data-test-id":"image-modal-confirm-btn",disabled:h,onClick:function(){return t({altText:d,src:i})},children:"Confirm"})})]})}function yn(e){var t=e.onClick,n=(0,a.useState)(""),o=(0,r.Z)(n,2),i=o[0],l=o[1],c=(0,a.useState)(""),u=(0,r.Z)(c,2),d=u[0],f=u[1],h=""===i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(on,{label:"Image Upload",onChange:function(e){var t=new FileReader;t.onload=function(){return"string"===typeof t.result&&l(t.result),""},null!==e&&t.readAsDataURL(e[0])},accept:"image/*","data-test-id":"image-modal-file-upload"}),(0,s.jsx)(Yt,{label:"Alt Text",placeholder:"Descriptive alternative text",onChange:f,value:d,"data-test-id":"image-modal-alt-text-input"}),(0,s.jsx)("div",{className:"ToolbarPlugin__dialogActions",children:(0,s.jsx)(fe,{"data-test-id":"image-modal-file-upload-btn",disabled:h,onClick:function(){return t({altText:d,src:i})},children:"Confirm"})})]})}function _n(e){var t=e.activeEditor,n=e.onClose,o=(0,a.useState)(null),i=(0,r.Z)(o,2),l=i[0],c=i[1],u=function(e){t.dispatchCommand(Re,e),n()};return(0,s.jsxs)(s.Fragment,{children:[!l&&(0,s.jsxs)("div",{className:"ToolbarPlugin__dialogButtonsList",children:[(0,s.jsx)(fe,{"data-test-id":"image-modal-option-sample",onClick:function(){return u({altText:"Yellow flower in tilt shift lens",src:At})},children:"Sample"}),(0,s.jsx)(fe,{"data-test-id":"image-modal-option-url",onClick:function(){return c("url")},children:"URL"}),(0,s.jsx)(fe,{"data-test-id":"image-modal-option-file",onClick:function(){return c("file")},children:"File"})]}),"url"===l&&(0,s.jsx)(wn,{onClick:u}),"file"===l&&(0,s.jsx)(yn,{onClick:u})]})}function kn(e){var t=e.activeEditor,n=e.onClose,o=(0,a.useState)("5"),i=(0,r.Z)(o,2),l=i[0],c=i[1],u=(0,a.useState)("5"),d=(0,r.Z)(u,2),f=d[0],h=d[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Yt,{label:"No of rows",onChange:c,value:l}),(0,s.jsx)(Yt,{label:"No of columns",onChange:h,value:f}),(0,s.jsx)("div",{className:"ToolbarPlugin__dialogActions","data-test-id":"table-model-confirm-insert",children:(0,s.jsx)(fe,{onClick:function(){t.dispatchCommand(pe.INSERT_TABLE_COMMAND,{columns:f,rows:l}),n()},children:"Confirm"})})]})}var En=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,Tn=function(e){var t=e.match(En);return 11===(null===t||void 0===t?void 0:t[2].length)?t[2]:null};function Sn(e){var t=e.activeEditor,n=e.onClose,o=(0,a.useState)(""),i=(0,r.Z)(o,2),l=i[0],c=i[1],u=""===l||!Tn(l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Yt,{"data-test-id":"youtube-embed-modal-url",label:"YouTube URL",placeholder:"i.e. https://www.youtube.com/watch?v=jNQXAC9IVRw",onChange:c,value:l}),(0,s.jsx)("div",{className:"ToolbarPlugin__dialogActions",children:(0,s.jsx)(fe,{"data-test-id":"youtube-embed-modal-submit-btn",disabled:u,onClick:function(){var e=Tn(l);e&&t.dispatchCommand(pn,e),n()},children:"Confirm"})})]})}function In(e){var t=e.activeEditor,n=e.onClose,r=(0,a.useCallback)((function(e,r){t.dispatchCommand(hn,{equation:e,inline:r}),n()}),[t,n]);return(0,s.jsx)(sn,{onConfirm:r})}function Zn(e){return e?"active dropdown-item-active":""}function Rn(e){var t=e.editor,n=e.blockType,r=function(e){n!==e&&t.update((function(){var t=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(t)&&(0,St.$wrapLeafNodesInElements)(t,(function(){return(0,Tt.$createHeadingNode)(e)}))}))};return(0,s.jsxs)(Wt,{buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-type "+n,buttonLabel:gn[n],buttonAriaLabel:"Formatting options for text style",children:[(0,s.jsxs)(qt,{className:"item "+Zn("paragraph"===n),onClick:function(){"paragraph"!==n&&t.update((function(){var e=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(e)&&(0,St.$wrapLeafNodesInElements)(e,(function(){return(0,ie.$createParagraphNode)()}))}))},children:[(0,s.jsx)("i",{className:"icon paragraph"}),(0,s.jsx)("span",{className:"text",children:"Normal"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("h1"===n),onClick:function(){return r("h1")},children:[(0,s.jsx)("i",{className:"icon h1"}),(0,s.jsx)("span",{className:"text",children:"Heading 1"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("h2"===n),onClick:function(){return r("h2")},children:[(0,s.jsx)("i",{className:"icon h2"}),(0,s.jsx)("span",{className:"text",children:"Heading 2"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("h3"===n),onClick:function(){return r("h3")},children:[(0,s.jsx)("i",{className:"icon h3"}),(0,s.jsx)("span",{className:"text",children:"Heading 3"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("bullet"===n),onClick:function(){"bullet"!==n?t.dispatchCommand(kt.INSERT_UNORDERED_LIST_COMMAND,void 0):t.dispatchCommand(kt.REMOVE_LIST_COMMAND,void 0)},children:[(0,s.jsx)("i",{className:"icon bullet-list"}),(0,s.jsx)("span",{className:"text",children:"Bullet List"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("number"===n),onClick:function(){"number"!==n?t.dispatchCommand(kt.INSERT_ORDERED_LIST_COMMAND,void 0):t.dispatchCommand(kt.REMOVE_LIST_COMMAND,void 0)},children:[(0,s.jsx)("i",{className:"icon numbered-list"}),(0,s.jsx)("span",{className:"text",children:"Numbered List"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("check"===n),onClick:function(){"check"!==n?t.dispatchCommand(kt.INSERT_CHECK_LIST_COMMAND,void 0):t.dispatchCommand(kt.REMOVE_LIST_COMMAND,void 0)},children:[(0,s.jsx)("i",{className:"icon check-list"}),(0,s.jsx)("span",{className:"text",children:"Check List"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("quote"===n),onClick:function(){"quote"!==n&&t.update((function(){var e=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(e)&&(0,St.$wrapLeafNodesInElements)(e,(function(){return(0,Tt.$createQuoteNode)()}))}))},children:[(0,s.jsx)("i",{className:"icon quote"}),(0,s.jsx)("span",{className:"text",children:"Quote"})]}),(0,s.jsxs)(qt,{className:"item "+Zn("code"===n),onClick:function(){"code"!==n&&t.update((function(){var e=(0,ie.$getSelection)();if((0,ie.$isRangeSelection)(e))if(e.isCollapsed())(0,St.$wrapLeafNodesInElements)(e,(function(){return(0,Q.$createCodeNode)()}));else{e.getNodes().forEach((function(e){(function(e){return e instanceof Ft})(e)&&e.replace((0,ie.$createTextNode)("https://www.youtube.com/watch?v=".concat(e.getId())))}));var t=e.getTextContent(),n=(0,Q.$createCodeNode)();e.insertNodes([n]),e.insertRawText(t)}}))},children:[(0,s.jsx)("i",{className:"icon code"}),(0,s.jsx)("span",{className:"text",children:"Code Block"})]})]})}function Mn(){return(0,s.jsx)("div",{className:"divider"})}function On(e){var t=e.editor,n=e.value,o=e.style,i=(0,a.useCallback)((function(e){t.update((function(){var t=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(t)&&(0,St.$patchStyleText)(t,(0,A.Z)({},o,e))}))}),[t,o]),l="font-family"===o?"Formatting options for font family":"Formatting options for font size";return(0,s.jsx)(Wt,{buttonClassName:"toolbar-item "+o,buttonLabel:n,buttonIconClassName:"font-family"===o?"icon block-type font-family":"",buttonAriaLabel:l,children:("font-family"===o?FONT_FAMILY_OPTIONS:bn).map((function(e){var t=(0,r.Z)(e,2),a=t[0],l=t[1];return(0,s.jsx)(qt,{className:"item ".concat(Zn(n===a)," ").concat("font-size"===o?"fontsize-item":""),onClick:function(){return i(a)},children:(0,s.jsx)("span",{className:"text",children:l})},a)}))})}function An(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0],n=(0,a.useState)(t),o=(0,r.Z)(n,2),i=o[0],l=o[1],c=(0,a.useState)("paragraph"),u=(0,r.Z)(c,2),d=u[0],f=u[1],h=(0,a.useState)(null),m=(0,r.Z)(h,2),p=m[0],x=m[1],g=(0,a.useState)("15px"),v=(0,r.Z)(g,2),b=v[0],N=v[1],C=(0,a.useState)("#000"),j=(0,r.Z)(C,2),w=j[0],y=j[1],_=(0,a.useState)("#fff"),k=(0,r.Z)(_,2),E=k[0],T=k[1],S=(0,a.useState)("Arial"),I=(0,r.Z)(S,2),Z=(I[0],I[1]),R=(0,a.useState)(!1),M=(0,r.Z)(R,2),O=M[0],A=M[1],L=(0,a.useState)(!1),P=(0,r.Z)(L,2),D=P[0],$=P[1],F=(0,a.useState)(!1),z=(0,r.Z)(F,2),H=z[0],B=z[1],q=(0,a.useState)(!1),U=(0,r.Z)(q,2),W=U[0],Y=U[1],K=(0,a.useState)(!1),G=(0,r.Z)(K,2),X=G[0],J=G[1],V=(0,a.useState)(!1),ee=(0,r.Z)(V,2),te=ee[0],ne=ee[1],oe=(0,a.useState)(!1),le=(0,r.Z)(oe,2),ce=le[0],de=le[1],fe=(0,a.useState)(!1),he=(0,r.Z)(fe,2),pe=he[0],xe=he[1],ge=(0,a.useState)(!1),ve=(0,r.Z)(ge,2),be=ve[0],Ne=ve[1],Ce=(0,a.useState)(!1),je=(0,r.Z)(Ce,2),we=je[0],ye=je[1],_e=ue(),ke=(0,r.Z)(_e,2),Ee=ke[0],Te=ke[1],Se=(0,a.useState)(!1),Ie=(0,r.Z)(Se,2),Ze=Ie[0],Me=Ie[1],Oe=(0,a.useState)(""),Ae=(0,r.Z)(Oe,2),Le=Ae[0],Pe=Ae[1],De=(0,a.useCallback)((function(){var e=(0,ie.$getSelection)();if((0,ie.$isRangeSelection)(e)){var t=e.anchor.getNode(),n="root"===t.getKey()?t:t.getTopLevelElementOrThrow(),r=n.getKey(),a=i.getElementByKey(r);$(e.hasFormat("bold")),B(e.hasFormat("italic")),Y(e.hasFormat("underline")),J(e.hasFormat("strikethrough")),ne(e.hasFormat("subscript")),de(e.hasFormat("superscript")),xe(e.hasFormat("code")),Me((0,St.$isParentElementRTL)(e));var o=Nn(e),s=o.getParent();if((0,xt.$isLinkNode)(s)||(0,xt.$isLinkNode)(o)?A(!0):A(!1),null!==a)if(x(r),(0,kt.$isListNode)(n)){var l=(0,ae.$getNearestNodeOfType)(t,kt.ListNode),c=l?l.getListType():n.getListType();f(c)}else{var u=(0,Tt.$isHeadingNode)(n)?n.getTag():n.getType();if(u in gn&&f(u),(0,Q.$isCodeNode)(n)){var d=n.getLanguage();return void Pe(d?Q.CODE_LANGUAGE_MAP[d]||d:"")}}N((0,St.$getSelectionStyleValueForProperty)(e,"font-size","15px")),y((0,St.$getSelectionStyleValueForProperty)(e,"color","#000")),T((0,St.$getSelectionStyleValueForProperty)(e,"background-color","#fff")),Z((0,St.$getSelectionStyleValueForProperty)(e,"font-family","Arial"))}}),[i]);(0,a.useEffect)((function(){return t.registerCommand(ie.SELECTION_CHANGE_COMMAND,(function(e,t){return De(),l(t),!1}),ie.COMMAND_PRIORITY_CRITICAL)}),[t,De]),(0,a.useEffect)((function(){return(0,ae.mergeRegister)(i.registerUpdateListener((function(e){e.editorState.read((function(){De()}))})),i.registerCommand(ie.CAN_UNDO_COMMAND,(function(e){return Ne(e),!1}),ie.COMMAND_PRIORITY_CRITICAL),i.registerCommand(ie.CAN_REDO_COMMAND,(function(e){return ye(e),!1}),ie.COMMAND_PRIORITY_CRITICAL))}),[i,De]);var $e=(0,a.useCallback)((function(e){i.update((function(){var t=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(t)&&(0,St.$patchStyleText)(t,e)}))}),[i]),Fe=(0,a.useCallback)((function(){i.update((function(){var e=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(e)&&((0,St.$selectAll)(e),e.getNodes().forEach((function(e){(0,ie.$isTextNode)(e)&&(e.setFormat(0),e.setStyle(""),(0,ae.$getNearestBlockElementAncestorOrThrow)(e).setFormat("")),(0,Zt.$isDecoratorBlockNode)(e)&&e.setFormat("")})))}))}),[i]),ze=(0,a.useCallback)((function(e){$e({color:e})}),[$e]),He=(0,a.useCallback)((function(e){$e({"background-color":e})}),[$e]),Be=(0,a.useCallback)((function(){O?t.dispatchCommand(xt.TOGGLE_LINK_COMMAND,null):t.dispatchCommand(xt.TOGGLE_LINK_COMMAND,"https://")}),[t,O]),qe=(0,a.useCallback)((function(e){i.update((function(){if(null!==p){var t=(0,ie.$getNodeByKey)(p);(0,Q.$isCodeNode)(t)&&t.setLanguage(e)}}))}),[i,p]);return(0,s.jsxs)("div",{className:"toolbar",children:[(0,s.jsx)("button",{disabled:!be,onClick:function(){i.dispatchCommand(ie.UNDO_COMMAND,void 0)},title:Ot?"Undo (\u2318Z)":"Undo (Ctrl+Z)",className:"toolbar-item spaced","aria-label":"Undo",children:(0,s.jsx)("i",{className:"format undo"})}),(0,s.jsx)("button",{disabled:!we,onClick:function(){i.dispatchCommand(ie.REDO_COMMAND,void 0)},title:Ot?"Redo (\u2318Y)":"Undo (Ctrl+Y)",className:"toolbar-item","aria-label":"Redo",children:(0,s.jsx)("i",{className:"format redo"})}),(0,s.jsx)(Mn,{}),d in gn&&i===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Rn,{blockType:d,editor:t}),(0,s.jsx)(Mn,{})]}),"code"===d?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Wt,{buttonClassName:"toolbar-item code-language",buttonLabel:(0,Q.getLanguageFriendlyName)(Le),buttonAriaLabel:"Select language",children:vn.map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,s.jsx)(qt,{className:"item ".concat(Zn(n===Le)),onClick:function(){return qe(n)},children:(0,s.jsx)("span",{className:"text",children:a})},n)}))})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(On,{style:"font-size",value:b,editor:t}),(0,s.jsx)(Mn,{}),(0,s.jsx)("button",{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"bold")},className:"toolbar-item spaced "+(D?"active":""),title:Ot?"Bold (\u2318B)":"Bold (Ctrl+B)","aria-label":"Format text as bold. Shortcut: ".concat(Ot?"\u2318B":"Ctrl+B"),children:(0,s.jsx)("i",{className:"format bold"})}),(0,s.jsx)("button",{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"italic")},className:"toolbar-item spaced "+(H?"active":""),title:Ot?"Italic (\u2318I)":"Italic (Ctrl+I)","aria-label":"Format text as italics. Shortcut: ".concat(Ot?"\u2318I":"Ctrl+I"),children:(0,s.jsx)("i",{className:"format italic"})}),(0,s.jsx)("button",{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"underline")},className:"toolbar-item spaced "+(W?"active":""),title:Ot?"Underline (\u2318U)":"Underline (Ctrl+U)","aria-label":"Format text to underlined. Shortcut: ".concat(Ot?"\u2318U":"Ctrl+U"),children:(0,s.jsx)("i",{className:"format underline"})}),(0,s.jsx)("button",{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"code")},className:"toolbar-item spaced "+(pe?"active":""),title:"Insert code block","aria-label":"Insert code block",children:(0,s.jsx)("i",{className:"format code"})}),(0,s.jsx)("button",{onClick:Be,className:"toolbar-item spaced "+(O?"active":""),"aria-label":"Insert link",title:"Insert link",children:(0,s.jsx)("i",{className:"format link"})}),O&&(0,se.createPortal)((0,s.jsx)(jn,{editor:i}),document.body),(0,s.jsx)(Jt,{buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting text color",buttonIconClassName:"icon font-color",color:w,onChange:ze,title:"text color"}),(0,s.jsx)(Jt,{buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting background color",buttonIconClassName:"icon bg-color",color:E,onChange:He,title:"bg color"}),(0,s.jsxs)(Wt,{buttonClassName:"toolbar-item spaced",buttonLabel:"",buttonAriaLabel:"Formatting options for additional text styles",buttonIconClassName:"icon dropdown-more",children:[(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"strikethrough")},className:"item "+Zn(X),title:"Strikethrough","aria-label":"Format text with a strikethrough",children:[(0,s.jsx)("i",{className:"icon strikethrough"}),(0,s.jsx)("span",{className:"text",children:"Strikethrough"})]}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"subscript")},className:"item "+Zn(te),title:"Subscript","aria-label":"Format text with a subscript",children:[(0,s.jsx)("i",{className:"icon subscript"}),(0,s.jsx)("span",{className:"text",children:"Subscript"})]}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"superscript")},className:"item "+Zn(ce),title:"Superscript","aria-label":"Format text with a superscript",children:[(0,s.jsx)("i",{className:"icon superscript"}),(0,s.jsx)("span",{className:"text",children:"Superscript"})]}),(0,s.jsxs)(qt,{onClick:Fe,className:"item",title:"Clear text formatting","aria-label":"Clear all text formatting",children:[(0,s.jsx)("i",{className:"icon clear"}),(0,s.jsx)("span",{className:"text",children:"Clear Formatting"})]})]}),(0,s.jsx)(Mn,{}),(0,s.jsxs)(Wt,{buttonClassName:"toolbar-item spaced",buttonLabel:"Insert",buttonAriaLabel:"Insert specialized editor node",buttonIconClassName:"icon plus",children:[(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(me.INSERT_HORIZONTAL_RULE_COMMAND,void 0)},className:"item",children:[(0,s.jsx)("i",{className:"icon horizontal-rule"}),(0,s.jsx)("span",{className:"text",children:"Horizontal Rule"})]}),(0,s.jsxs)(qt,{onClick:function(){Te("Insert Image",(function(e){return(0,s.jsx)(_n,{activeEditor:i,onClose:e})}))},className:"item",children:[(0,s.jsx)("i",{className:"icon image"}),(0,s.jsx)("span",{className:"text",children:"Image"})]}),(0,s.jsxs)(qt,{onClick:function(){return e={altText:"Cat typing on a laptop",src:It},void i.dispatchCommand(Re,e);var e},className:"item",children:[(0,s.jsx)("i",{className:"icon gif"}),(0,s.jsx)("span",{className:"text",children:"GIF"})]}),(0,s.jsxs)(qt,{onClick:function(){Te("Insert Table",(function(e){return(0,s.jsx)(kn,{activeEditor:i,onClose:e})}))},className:"item",children:[(0,s.jsx)("i",{className:"icon table"}),(0,s.jsx)("span",{className:"text",children:"Table"})]}),(0,s.jsxs)(qt,{onClick:function(){Te("Insert YouTube Video",(function(e){return(0,s.jsx)(Sn,{activeEditor:i,onClose:e})}))},className:"item",children:[(0,s.jsx)("i",{className:"icon youtube"}),(0,s.jsx)("span",{className:"text",children:"YouTube Video"})]}),(0,s.jsxs)(qt,{onClick:function(){Te("Insert Equation",(function(e){return(0,s.jsx)(In,{activeEditor:i,onClose:e})}))},className:"item",children:[(0,s.jsx)("i",{className:"icon equation"}),(0,s.jsx)("span",{className:"text",children:"Equation"})]})]})]}),(0,s.jsx)(Mn,{}),(0,s.jsxs)(Wt,{buttonLabel:"Align",buttonIconClassName:"icon left-align",buttonClassName:"toolbar-item spaced alignment",buttonAriaLabel:"Formatting options for text alignment",children:[(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_ELEMENT_COMMAND,"left")},className:"item",children:[(0,s.jsx)("i",{className:"icon left-align"}),(0,s.jsx)("span",{className:"text",children:"Left Align"})]}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_ELEMENT_COMMAND,"center")},className:"item",children:[(0,s.jsx)("i",{className:"icon center-align"}),(0,s.jsx)("span",{className:"text",children:"Center Align"})]}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_ELEMENT_COMMAND,"right")},className:"item",children:[(0,s.jsx)("i",{className:"icon right-align"}),(0,s.jsx)("span",{className:"text",children:"Right Align"})]}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.FORMAT_ELEMENT_COMMAND,"justify")},className:"item",children:[(0,s.jsx)("i",{className:"icon justify-align"}),(0,s.jsx)("span",{className:"text",children:"Justify Align"})]}),(0,s.jsx)(Mn,{}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.OUTDENT_CONTENT_COMMAND,void 0)},className:"item",children:[(0,s.jsx)("i",{className:"icon "+(Ze?"indent":"outdent")}),(0,s.jsx)("span",{className:"text",children:"Outdent"})]}),(0,s.jsxs)(qt,{onClick:function(){i.dispatchCommand(ie.INDENT_CONTENT_COMMAND,void 0)},className:"item",children:[(0,s.jsx)("i",{className:"icon "+(Ze?"outdent":"indent")}),(0,s.jsx)("span",{className:"text",children:"Indent"})]})]}),Ee]})}var Ln=function(e){(0,ve.Z)(n,e);var t=(0,be.Z)(n);function n(e,r){var a;return(0,xe.Z)(this,n),(a=t.call(this,e)).title=void 0,a.icon=void 0,a.keywords=void 0,a.keyboardShortcut=void 0,a.onSelect=void 0,a.title=e,a.keywords=r.keywords||[],a.icon=r.icon,a.keyboardShortcut=r.keyboardShortcut,a.onSelect=r.onSelect.bind((0,_t.Z)(a)),a}return(0,ge.Z)(n)}(Et.TypeaheadOption);function Pn(e){var t=e.index,n=e.isSelected,r=e.onClick,a=e.onMouseEnter,o=e.option,i="item";return n&&(i+=" selected"),(0,s.jsxs)("li",{tabIndex:-1,className:i,ref:o.setRefElement,role:"option","aria-selected":n,id:"typeahead-item-"+t,onMouseEnter:a,onClick:r,children:[o.icon,(0,s.jsx)("span",{className:"text",children:o.title})]},o.key)}function Dn(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0],n=ue(),o=(0,r.Z)(n,2),i=o[0],l=o[1],c=(0,a.useState)(null),u=(0,r.Z)(c,2),d=u[0],f=u[1],m=(0,Et.useBasicTypeaheadTriggerMatch)("/",{minLength:0}),p=(0,a.useCallback)((function(){var e=[];if(null==d)return e;var n=new RegExp(/([1-9]|10)x([1-9]|10)$/),a=new RegExp(/([1-9]|10)x?$/),o=n.exec(d),i=a.exec(d);if(o){var l=o[0].split("x").map((function(e){return parseInt(e,10)})),c=(0,r.Z)(l,2),u=c[0],f=c[1];e.push(new Ln("".concat(u,"x").concat(f," Table"),{icon:(0,s.jsx)("i",{className:"icon table"}),keywords:["table"],onSelect:function(){return t.dispatchCommand(pe.INSERT_TABLE_COMMAND,{columns:f,rows:u})}}))}else if(i){var m=parseInt(i[0],10);e.push.apply(e,(0,h.Z)(Array.from({length:5},(function(e,t){return t+1})).map((function(e){return new Ln("".concat(m,"x").concat(e," Table"),{icon:(0,s.jsx)("i",{className:"icon table"}),keywords:["table"],onSelect:function(){return t.dispatchCommand(pe.INSERT_TABLE_COMMAND,{columns:e,rows:m})}})}))))}return e}),[t,d]),x=(0,a.useMemo)((function(){var e=[new Ln("Paragraph",{icon:(0,s.jsx)("i",{className:"icon paragraph"}),keywords:["normal","paragraph","p","text"],onSelect:function(){return t.update((function(){var e=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(e)&&(0,St.$wrapLeafNodesInElements)(e,(function(){return(0,ie.$createParagraphNode)()}))}))}})].concat((0,h.Z)(Array.from({length:3},(function(e,t){return t+1})).map((function(e){return new Ln("Heading ".concat(e),{icon:(0,s.jsx)("i",{className:"icon h".concat(e)}),keywords:["heading","header","h".concat(e)],onSelect:function(){return t.update((function(){var t=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(t)&&(0,St.$wrapLeafNodesInElements)(t,(function(){return(0,Tt.$createHeadingNode)("h".concat(e))}))}))}})}))),[new Ln("Table",{icon:(0,s.jsx)("i",{className:"icon table"}),keywords:["table","grid","spreadsheet","rows","columns"],onSelect:function(){return l("Insert Table",(function(e){return(0,s.jsx)(kn,{activeEditor:t,onClose:e})}))}}),new Ln("Numbered List",{icon:(0,s.jsx)("i",{className:"icon number"}),keywords:["numbered list","ordered list","ol"],onSelect:function(){return t.dispatchCommand(kt.INSERT_ORDERED_LIST_COMMAND,void 0)}}),new Ln("Bulleted List",{icon:(0,s.jsx)("i",{className:"icon bullet"}),keywords:["bulleted list","unordered list","ul"],onSelect:function(){return t.dispatchCommand(kt.INSERT_UNORDERED_LIST_COMMAND,void 0)}}),new Ln("Check List",{icon:(0,s.jsx)("i",{className:"icon check"}),keywords:["check list","todo list"],onSelect:function(){return t.dispatchCommand(kt.INSERT_CHECK_LIST_COMMAND,void 0)}}),new Ln("Quote",{icon:(0,s.jsx)("i",{className:"icon quote"}),keywords:["block quote"],onSelect:function(){return t.update((function(){var e=(0,ie.$getSelection)();(0,ie.$isRangeSelection)(e)&&(0,St.$wrapLeafNodesInElements)(e,(function(){return(0,Tt.$createQuoteNode)()}))}))}}),new Ln("Code",{icon:(0,s.jsx)("i",{className:"icon code"}),keywords:["javascript","python","js","codeblock"],onSelect:function(){return t.update((function(){var e=(0,ie.$getSelection)();if((0,ie.$isRangeSelection)(e))if(e.isCollapsed())(0,St.$wrapLeafNodesInElements)(e,(function(){return(0,Q.$createCodeNode)()}));else{var t=e.getTextContent(),n=(0,Q.$createCodeNode)();e.insertNodes([n]),e.insertRawText(t)}}))}}),new Ln("Divider",{icon:(0,s.jsx)("i",{className:"icon horizontal-rule"}),keywords:["horizontal rule","divider","hr"],onSelect:function(){return t.dispatchCommand(me.INSERT_HORIZONTAL_RULE_COMMAND,void 0)}}),new Ln("Equation",{icon:(0,s.jsx)("i",{className:"icon equation"}),keywords:["equation","latex","math"],onSelect:function(){return l("Insert Equation",(function(e){return(0,s.jsx)(In,{activeEditor:t,onClose:e})}))}}),new Ln("GIF",{icon:(0,s.jsx)("i",{className:"icon gif"}),keywords:["gif","animate","image","file"],onSelect:function(){return t.dispatchCommand(Re,{altText:"Cat typing on a laptop",src:It})}}),new Ln("Image",{icon:(0,s.jsx)("i",{className:"icon image"}),keywords:["image","photo","picture","file"],onSelect:function(){return l("Insert Image",(function(e){return(0,s.jsx)(_n,{activeEditor:t,onClose:e})}))}})],(0,h.Z)(["left","center","right","justify"].map((function(e){return new Ln("Align ".concat(e),{icon:(0,s.jsx)("i",{className:"icon ".concat(e,"-align")}),keywords:["align","justify",e],onSelect:function(){return t.dispatchCommand(ie.FORMAT_ELEMENT_COMMAND,e)}})})))),n=p();return d?[].concat((0,h.Z)(n),(0,h.Z)(e.filter((function(e){var t=new RegExp(d,"gi");return!(!t.exec(e.title)&&null==e.keywords)&&e.keywords.some((function(e){return t.lastIndex=0,t.exec(e)}))})))):e}),[t,p,d,l]),g=(0,a.useCallback)((function(e,n,r,a){t.update((function(){n&&n.remove(),e.onSelect(a),r()}))}),[t]);return(0,s.jsxs)(s.Fragment,{children:[i,(0,s.jsx)(Et.LexicalTypeaheadMenuPlugin,{onQueryChange:f,onSelectOption:g,triggerFn:m,options:x,menuRenderFn:function(e,t){var n=t.selectedIndex,r=t.selectOptionAndCleanUp,a=t.setHighlightedIndex;return e&&x.length?se.createPortal((0,s.jsx)("ul",{children:x.map((function(e,t){return(0,s.jsx)(Pn,{index:t,isSelected:n===t,onClick:function(){a(t),r(e)},onMouseEnter:function(){a(t)},option:e},e.key)}))}),e):null}})]})}function $n(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useEffect)((function(){return t.registerCommand(me.INSERT_HORIZONTAL_RULE_COMMAND,(function(e){var t=(0,ie.$getSelection)();if(!(0,ie.$isRangeSelection)(t))return!1;if(null!==t.focus.getNode()){var n=(0,me.$createHorizontalRuleNode)();t.insertParagraph(),t.focus.getNode().getTopLevelElementOrThrow().insertBefore(n)}return!0}),ie.COMMAND_PRIORITY_EDITOR)}),[t]),null}function Fn(e){var t=(0,ie.$getSelection)();if(!(0,ie.$isRangeSelection)(t))return!1;var n,r=function(e){var t=e.getNodes();return 0===t.length?new Set([e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]):new Set(t.map((function(e){return(0,ie.$isElementNode)(e)?e:e.getParentOrThrow()})))}(t),a=0,o=(0,he.Z)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if((0,kt.$isListNode)(i))a=Math.max((0,kt.$getListDepth)(i)+1,a);else if((0,kt.$isListItemNode)(i)){var s=i.getParent();if(!(0,kt.$isListNode)(s))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");a=Math.max((0,kt.$getListDepth)(s)+1,a)}}}catch(l){o.e(l)}finally{o.f()}return a<=e}function zn(e){var t=e.maxDepth,n=(0,re.useLexicalComposerContext)(),o=(0,r.Z)(n,1)[0];return(0,a.useEffect)((function(){return o.registerCommand(ie.INDENT_CONTENT_COMMAND,(function(){return!Fn(null!==t&&void 0!==t?t:7)}),ie.COMMAND_PRIORITY_CRITICAL)}),[o,t]),null}var Hn=n(8309);function Bn(){return(0,s.jsx)(Hn.MarkdownShortcutPlugin,{transformers:lt})}var qn=0,Un=!1;function Wn(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useEffect)((function(){return Un||(window.addEventListener("keydown",(function(e){9===e.keyCode&&(qn=e.timeStamp)}),!0),Un=!0),t.registerCommand(ie.FOCUS_COMMAND,(function(e){var t=(0,ie.$getSelection)();return(0,ie.$isRangeSelection)(t)&&qn+100>e.timeStamp&&(0,ie.$setSelection)(t.clone()),!1}),1)}),[t]),null}function Yn(e){var t=e.editor,n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,a.useRef)(null),c=(0,a.useState)(null),u=(0,r.Z)(c,2),d=u[0],f=u[1],h=(0,a.useState)(null),m=(0,r.Z)(h,2),p=m[0],x=m[1],g=(0,a.useState)(!1),v=(0,r.Z)(g,2),b=v[0],N=v[1],C=(0,a.useState)(null),j=(0,r.Z)(C,2),w=j[0],y=j[1];(0,a.useEffect)((function(){return t.registerCommand(ie.SELECTION_CHANGE_COMMAND,(function(e){var t=(0,ie.$getSelection)(),n=(0,ie.$isGridSelection)(t);return b!==n&&N(n),!1}),ie.COMMAND_PRIORITY_HIGH)}));var _=(0,a.useCallback)((function(){x(null),n.current=null,y(null),l.current=null,i.current=null}),[]);(0,a.useEffect)((function(){var e=function(e){setTimeout((function(){var r=e.target;if(w)f({x:e.clientX,y:e.clientY});else if((!o.current||!o.current.contains(r))&&n.current!==r){n.current=r;var a=(0,pe.getCellFromTarget)(r);a&&p!==a?t.update((function(){var e=(0,ie.$getNearestNodeFromDOMNode)(a.elem);if(!e)throw new Error("TableCellResizer: Table cell node not found.");var o=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(e),s=t.getElementByKey(o.getKey());if(!s)throw new Error("TableCellResizer: Table element not found.");n.current=r,i.current=s.getBoundingClientRect(),x(a)})):null==a&&_()}}),0)};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[p,w,t,_]);var k=function(e){return"bottom"===e},E=(0,a.useCallback)((function(e){if(!p)throw new Error("TableCellResizer: Expected active cell.");t.update((function(){var t=(0,ie.$getNearestNodeFromDOMNode)(p.elem);if(!(0,pe.$isTableCellNode)(t))throw new Error("TableCellResizer: Table cell node not found.");var n=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(t),r=(0,pe.$getTableRowIndexFromTableCellNode)(t),a=n.getChildren();if(r>=a.length||r<0)throw new Error("Expected table cell to be inside of table row.");var o=a[r];if(!(0,pe.$isTableRowNode)(o))throw new Error("Expected table row");o.setHeight(e)}))}),[p,t]),T=(0,a.useCallback)((function(e){if(!p)throw new Error("TableCellResizer: Expected active cell.");t.update((function(){var t=(0,ie.$getNearestNodeFromDOMNode)(p.elem);if(!(0,pe.$isTableCellNode)(t))throw new Error("TableCellResizer: Table cell node not found.");for(var n=(0,pe.$getTableNodeFromLexicalNodeOrThrow)(t),r=(0,pe.$getTableColumnIndexFromTableCellNode)(t),a=n.getChildren(),o=0;o<a.length;o++){var i=a[o];if(!(0,pe.$isTableRowNode)(i))throw new Error("Expected table row");var s=i.getChildren();if(r>=s.length||r<0)throw new Error("Expected table cell to be inside of table row.");var l=s[r];if(!(0,pe.$isTableCellNode)(l))throw new Error("Expected table cell");l.setWidth(e)}}))}),[p,t]),S=(0,a.useCallback)((function(e){return function(t){if(t.preventDefault(),t.stopPropagation(),!p)throw new Error("TableCellResizer: Expected active cell.");if(w===e&&l.current){var n=l.current,r=n.x,a=n.y;if(null===p)return;var o=p.elem.getBoundingClientRect(),i=o.height,s=o.width;if(k(e)){var c=Math.abs(t.clientY-a),u="bottom"===e&&a>t.clientY;E(Math.max(u?i-c:c+i,33))}else{var d=Math.abs(t.clientX-r),h="right"===e&&r>t.clientX;T(Math.max(h?s-d:d+s,50))}_()}else l.current={x:t.clientX,y:t.clientY},f(l.current),y(e)}}),[p,w,_,T,E]),I=(0,a.useCallback)((function(){if(p){var e=p.elem.getBoundingClientRect(),t=e.height,n=e.width,r=e.top,a=e.left,o={bottom:{backgroundColor:"none",cursor:"row-resize",height:"10px",left:"".concat(window.pageXOffset+a,"px"),top:"".concat(window.pageYOffset+r+t,"px"),width:"".concat(n,"px")},right:{backgroundColor:"none",cursor:"col-resize",height:"".concat(t,"px"),left:"".concat(window.pageXOffset+a+n,"px"),top:"".concat(window.pageYOffset+r,"px"),width:"10px"}},s=i.current;return w&&d&&s&&(k(w)?(o[w].left="".concat(window.pageXOffset+s.left,"px"),o[w].top="".concat(window.pageYOffset+d.y,"px"),o[w].height="3px",o[w].width="".concat(s.width,"px")):(o[w].top="".concat(window.pageYOffset+s.top,"px"),o[w].left="".concat(window.pageXOffset+d.x,"px"),o[w].width="3px",o[w].height="".concat(s.height,"px")),o[w].backgroundColor="#adf"),o}return{bottom:null,left:null,right:null,top:null}}),[p,w,d])();return(0,s.jsx)("div",{ref:o,children:null!=p&&!b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:I.right||void 0,onMouseDown:S("right"),onMouseUp:S("right")}),(0,s.jsx)("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:I.bottom||void 0,onMouseDown:S("bottom"),onMouseUp:S("bottom")})]})})}function Kn(){var e=(0,re.useLexicalComposerContext)(),t=(0,r.Z)(e,1)[0];return(0,a.useMemo)((function(){return(0,se.createPortal)((0,s.jsx)(Yn,{editor:t}),document.body)}),[t])}n(3441),n(7022),n(5835),n(3839),n(4249),"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?a.useLayoutEffect:a.useEffect;var Gn={characterLimit:"PlaygroundEditorTheme__characterLimit",code:"PlaygroundEditorTheme__code",codeHighlight:{atrule:"PlaygroundEditorTheme__tokenAttr",attr:"PlaygroundEditorTheme__tokenAttr",boolean:"PlaygroundEditorTheme__tokenProperty",builtin:"PlaygroundEditorTheme__tokenSelector",cdata:"PlaygroundEditorTheme__tokenComment",char:"PlaygroundEditorTheme__tokenSelector",class:"PlaygroundEditorTheme__tokenFunction","class-name":"PlaygroundEditorTheme__tokenFunction",comment:"PlaygroundEditorTheme__tokenComment",constant:"PlaygroundEditorTheme__tokenProperty",deleted:"PlaygroundEditorTheme__tokenProperty",doctype:"PlaygroundEditorTheme__tokenComment",entity:"PlaygroundEditorTheme__tokenOperator",function:"PlaygroundEditorTheme__tokenFunction",important:"PlaygroundEditorTheme__tokenVariable",inserted:"PlaygroundEditorTheme__tokenSelector",keyword:"PlaygroundEditorTheme__tokenAttr",namespace:"PlaygroundEditorTheme__tokenVariable",number:"PlaygroundEditorTheme__tokenProperty",operator:"PlaygroundEditorTheme__tokenOperator",prolog:"PlaygroundEditorTheme__tokenComment",property:"PlaygroundEditorTheme__tokenProperty",punctuation:"PlaygroundEditorTheme__tokenPunctuation",regex:"PlaygroundEditorTheme__tokenVariable",selector:"PlaygroundEditorTheme__tokenSelector",string:"PlaygroundEditorTheme__tokenSelector",symbol:"PlaygroundEditorTheme__tokenProperty",tag:"PlaygroundEditorTheme__tokenProperty",url:"PlaygroundEditorTheme__tokenOperator",variable:"PlaygroundEditorTheme__tokenVariable"},embedBlock:{base:"PlaygroundEditorTheme__embedBlock",focus:"PlaygroundEditorTheme__embedBlockFocus"},hashtag:"PlaygroundEditorTheme__hashtag",heading:{h1:"PlaygroundEditorTheme__h1",h2:"PlaygroundEditorTheme__h2",h3:"PlaygroundEditorTheme__h3",h4:"PlaygroundEditorTheme__h4",h5:"PlaygroundEditorTheme__h5",h6:"PlaygroundEditorTheme__h6"},image:"editor-image",link:"PlaygroundEditorTheme__link",list:{listitem:"PlaygroundEditorTheme__listItem",listitemChecked:"PlaygroundEditorTheme__listItemChecked",listitemUnchecked:"PlaygroundEditorTheme__listItemUnchecked",nested:{listitem:"PlaygroundEditorTheme__nestedListItem"},olDepth:["PlaygroundEditorTheme__ol1","PlaygroundEditorTheme__ol2","PlaygroundEditorTheme__ol3","PlaygroundEditorTheme__ol4","PlaygroundEditorTheme__ol5"],ul:"PlaygroundEditorTheme__ul"},ltr:"PlaygroundEditorTheme__ltr",mark:"PlaygroundEditorTheme__mark",markOverlap:"PlaygroundEditorTheme__markOverlap",paragraph:"PlaygroundEditorTheme__paragraph",quote:"PlaygroundEditorTheme__quote",rtl:"PlaygroundEditorTheme__rtl",table:"PlaygroundEditorTheme__table",tableCell:"PlaygroundEditorTheme__tableCell",tableCellHeader:"PlaygroundEditorTheme__tableCellHeader",text:{bold:"PlaygroundEditorTheme__textBold",code:"PlaygroundEditorTheme__textCode",italic:"PlaygroundEditorTheme__textItalic",strikethrough:"PlaygroundEditorTheme__textStrikethrough",subscript:"PlaygroundEditorTheme__textSubscript",superscript:"PlaygroundEditorTheme__textSuperscript",underline:"PlaygroundEditorTheme__textUnderline",underlineStrikethrough:"PlaygroundEditorTheme__textUnderlineStrikethrough"}},Xn=((0,m.Z)((0,m.Z)({},Gn),{},{paragraph:"CommentEditorTheme__paragraph"}),(0,ie.createCommand)());function Jn(e){var t=e.editor,n=e.isLink,r=e.isBold,o=e.isItalic,i=e.isUnderline,l=e.isCode,c=e.isStrikethrough,u=e.isSubscript,d=e.isSuperscript,f=(0,a.useRef)(null),h=(0,a.useCallback)((function(){n?t.dispatchCommand(xt.TOGGLE_LINK_COMMAND,null):t.dispatchCommand(xt.TOGGLE_LINK_COMMAND,"https://")}),[t,n]),m=(0,a.useCallback)((function(){var e=(0,ie.$getSelection)(),n=f.current,r=window.getSelection();if(null!==n){var a=t.getRootElement();if(null!==e&&null!==r&&!r.isCollapsed&&null!==a&&a.contains(r.anchorNode)){var o,i=r.getRangeAt(0),s=a.getBoundingClientRect();if(r.anchorNode===a){for(var l=a;null!=l.firstElementChild;)l=l.firstElementChild;o=l.getBoundingClientRect()}else o=i.getBoundingClientRect();!function(e,t,n){var r=t.top-8+window.pageYOffset,a=t.left+340+window.pageXOffset-e.offsetWidth+t.width;a+e.offsetWidth>n.right&&(a=t.right-e.offsetWidth,r=t.top-50+window.pageYOffset),a<0&&(a=t.left,r=t.bottom+20),t.width>=n.width-25&&(a=t.left,r=t.top-50+window.pageYOffset),r<n.top&&(r=t.bottom+20),e.style.opacity="1",e.style.top="".concat(r,"px"),e.style.left="".concat(a,"px")}(n,o,s)}}}),[t]);return(0,a.useEffect)((function(){var e=function(){t.getEditorState().read((function(){m()}))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[t,m]),(0,a.useEffect)((function(){return t.getEditorState().read((function(){m()})),(0,ae.mergeRegister)(t.registerUpdateListener((function(e){e.editorState.read((function(){m()}))})),t.registerCommand(ie.SELECTION_CHANGE_COMMAND,(function(){return m(),!1}),ie.COMMAND_PRIORITY_LOW))}),[t,m]),(0,s.jsxs)("div",{ref:f,className:"floating-text-format-popup",children:[(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"bold")},className:"popup-item spaced "+(r?"active":""),"aria-label":"Format text as bold",children:(0,s.jsx)("i",{className:"format bold"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"italic")},className:"popup-item spaced "+(o?"active":""),"aria-label":"Format text as italics",children:(0,s.jsx)("i",{className:"format italic"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"underline")},className:"popup-item spaced "+(i?"active":""),"aria-label":"Format text to underlined",children:(0,s.jsx)("i",{className:"format underline"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"strikethrough")},className:"popup-item spaced "+(c?"active":""),"aria-label":"Format text with a strikethrough",children:(0,s.jsx)("i",{className:"format strikethrough"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"subscript")},className:"popup-item spaced "+(u?"active":""),title:"Subscript","aria-label":"Format Subscript",children:(0,s.jsx)("i",{className:"format subscript"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"superscript")},className:"popup-item spaced "+(d?"active":""),title:"Superscript","aria-label":"Format Superscript",children:(0,s.jsx)("i",{className:"format superscript"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(ie.FORMAT_TEXT_COMMAND,"code")},className:"popup-item spaced "+(l?"active":""),"aria-label":"Insert code block",children:(0,s.jsx)("i",{className:"format code"})}),(0,s.jsx)("button",{onClick:h,className:"popup-item spaced "+(n?"active":""),"aria-label":"Insert link",children:(0,s.jsx)("i",{className:"format link"})}),(0,s.jsx)("button",{onClick:function(){t.dispatchCommand(Xn,void 0)},className:"popup-item spaced "+(n?"active":""),"aria-label":"Insert link",children:(0,s.jsx)("i",{className:"format add-comment"})})]})}function Vn(e){var t=(0,a.useState)(!1),n=(0,r.Z)(t,2),o=n[0],i=n[1],l=(0,a.useState)(!1),c=(0,r.Z)(l,2),u=c[0],d=c[1],f=(0,a.useState)(!1),h=(0,r.Z)(f,2),m=h[0],p=h[1],x=(0,a.useState)(!1),g=(0,r.Z)(x,2),v=g[0],b=g[1],N=(0,a.useState)(!1),C=(0,r.Z)(N,2),j=C[0],w=C[1],y=(0,a.useState)(!1),_=(0,r.Z)(y,2),k=_[0],E=_[1],T=(0,a.useState)(!1),S=(0,r.Z)(T,2),I=S[0],Z=S[1],R=(0,a.useState)(!1),M=(0,r.Z)(R,2),O=M[0],A=M[1],L=(0,a.useState)(!1),P=(0,r.Z)(L,2),D=P[0],$=P[1],F=(0,a.useCallback)((function(){e.getEditorState().read((function(){if(!e.isComposing()){var t=(0,ie.$getSelection)(),n=window.getSelection(),r=e.getRootElement();if(null===n||(0,ie.$isRangeSelection)(t)&&null!==r&&r.contains(n.anchorNode)){if((0,ie.$isRangeSelection)(t)){var a=function(e){var t=e.anchor,n=e.focus,r=e.anchor.getNode(),a=e.focus.getNode();return r===a?r:e.isBackward()?(0,St.$isAtNodeEnd)(n)?r:a:(0,St.$isAtNodeEnd)(t)?a:r}(t);p(t.hasFormat("bold")),b(t.hasFormat("italic")),w(t.hasFormat("underline")),E(t.hasFormat("strikethrough")),Z(t.hasFormat("subscript")),A(t.hasFormat("superscript")),$(t.hasFormat("code"));var o=a.getParent();(0,xt.$isLinkNode)(o)||(0,xt.$isLinkNode)(a)?d(!0):d(!1),(0,Q.$isCodeHighlightNode)(t.anchor.getNode())||""===t.getTextContent()?i(!1):i((0,ie.$isTextNode)(a))}}else i(!1)}}))}),[e]);return(0,a.useEffect)((function(){return document.addEventListener("selectionchange",F),function(){document.removeEventListener("selectionchange",F)}}),[F]),(0,a.useEffect)((function(){return e.registerUpdateListener((function(){F()}))}),[e,F]),!o||u?null:(0,se.createPortal)((0,s.jsx)(Jn,{editor:e,isLink:u,isBold:m,isItalic:v,isStrikethrough:k,isSubscript:I,isSuperscript:O,isUnderline:j,isCode:D}),document.body)}function Qn(){var e=(0,re.useLexicalComposerContext)();return Vn((0,r.Z)(e,1)[0])}n(2791).useEffect;var er=function(e){var t=e.data,n=JSON.parse(t),a=(0,re.useLexicalComposerContext)(),o=(0,r.Z)(a,1)[0],i=o.parseEditorState(JSON.stringify(n.editorState));return o.setEditorState(i),o.dispatchCommand(ie.CLEAR_HISTORY_COMMAND,void 0),null};function tr(e){var t=function e(t){switch(t.getType()){case"root":return t.getChildren().map((function(t){return e(t)})).join("");case"heading":var n=t;return"<".concat(n.getTag(),">").concat(n.getChildren().map((function(t){return e(t)})).join(""),"</").concat(n.getTag(),">");case"list":var r=t;return"<".concat(r.getTag(),">").concat(r.getChildren().map((function(t){return e(t)})).join(""),"</").concat(r.getTag(),">");case"text":return function(e){var t=e.getFormat();console.log(e.getStyle());var n=e.getStyle()?'<span style="'.concat(e.getStyle(),'">').concat(e.getTextContent(),"</span>"):e.getTextContent();return t%2===1&&(n="<strong>".concat(n,"</strong>")),(t>>=1)%2===1&&(n="<em>".concat(n,"</em>")),(t>>=1)%2===1&&(n="<s>".concat(n,"</s>")),(t>>=1)%2===1&&(n="<u>".concat(n,"</u>")),(t>>=1)%2===1&&(n="<code>".concat(n,"</code>")),(t>>=1)%2===1&&(n="<sub>".concat(n,"</sub>")),(t>>=1)%2===1&&(n="<sup>".concat(n,"</sup>")),n}(t);case"quote":return'<blockquote class="dark:border-slate-700 bg-gray-100 dark:bg-gray-800 text-[#666] pl-[3em] border-l-[0.5em] border-[#eee]"><em>'.concat(t.getChildren().map((function(t){return e(t)})).join(""),"</em></blockquote>");case"paragraph":var a=t;return'<p class="p-1" '.concat(a.getFormat()?' style="'.concat(function(e){switch(e){case 1:return"text-align: left;";case 2:return"text-align: center;";case 3:return"text-align: right;";case 4:return"text-align: justify;";default:return""}}(a.getFormat()),'"'):"",">").concat(a.getChildren().map((function(t){return e(t)})).join(""),"</p>");case"listitem":return"<li>".concat(t.getChildren().map((function(t){return e(t)})).join(""),"</li>");case"link":var o=t;return'<a href="'.concat(o.getURL(),'" class="text-blue-500 hover:underline visited:text-blue-800" target="_blank">').concat(o.getChildren().map((function(t){return e(t)})).join(""),"</a>");case"image":var i=t;return'<img src="'.concat(i.getSrc(),'" class="inline-block w-full" style="max-width: ').concat(i.__maxWidth.toString(),'px"></img>');case"table":var s="";return t.getChildren().map((function(t,n){console.log(t),t.getChildren().map((function(t,n){console.log(t.getChildren()),s+="<td>".concat(t.getChildren().map((function(t){return e(t)})).join(""),"</td>")})),s="<tr>".concat(s,"</tr>")})),"<table>".concat(s,"</table>");case"equation":var l=t,c=we.Z.renderToString(l.getEquation(),{displayMode:!l.__inline,output:"html"});return'<span class="katex">'.concat(c,"</span>");default:return""}};return new Promise((function(n){e.read((function(){n(t((0,ie.$getRoot)()))}))}))}function nr(e){var t,n,i,l=e.data,c=(0,o.UO)(),u=a.useState(""),h=u.errorMessage,m=(u.setErrorMessage,a.useState(!1)),p=m.isShowing,x=(m.setIsShowing,U().historyState),g=F().settings,v=g.isCollab,N=g.isRichText,C=g.showTreeView,j=(0,s.jsx)(Xe,{children:"Enter some rich text..."}),w=(0,a.useRef)(null),y=(0,re.useLexicalComposerContext)(),_=(0,r.Z)(y,1)[0],k=ue(),E=(0,r.Z)(k,2),T=E[0],S=E[1],I=function(e){e.ctrlKey&&"s"===e.key&&(e.preventDefault(),_.update((0,f.Z)((0,d.Z)().mark((function e(){var t,n,r,a,o;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_.getEditorState(),e.next=3,tr(r);case 3:return a=e.sent,console.log(a),o={editorState:r},e.next=8,(0,b.wA)("https://api.aakhyaan.org/topic/edit",{courseId:c.courseId,subjectId:c.subjectId,chapterId:c.chapterId,topicId:c.topicId,topicTitle:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.title,topicContent:a,topicEditor:JSON.stringify(o),published:null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.published});case 8:e.sent,alert("Your content is saved successfully.");case 10:case"end":return e.stop()}}),e)}))))),e.ctrlKey&&"KeyM"===e.code&&S("Insert Equation",(function(e){return(0,s.jsx)(In,{activeEditor:_,onClose:e})}))};return a.useEffect((function(){return window.addEventListener("keydown",I),function(){window.removeEventListener("keydown",I)}}),[]),(0,s.jsxs)(s.Fragment,{children:[N&&(0,s.jsx)(An,{}),(0,s.jsxs)("div",{className:"editor-container ".concat(C?"tree-view":""," ").concat(N?"":"plain-text"),ref:w,children:[(0,s.jsx)(K.ClearEditorPlugin,{}),(0,s.jsx)(Dn,{}),(0,s.jsx)(pt,{}),(0,s.jsx)(W.AutoScrollPlugin,{scrollRef:w}),(0,s.jsx)(H.HistoryPlugin,{externalHistoryState:x}),(0,s.jsx)(J.RichTextPlugin,{contentEditable:(0,s.jsx)(Be,{}),placeholder:j,initialEditorState:v?null:void 0}),"undefined"!==typeof(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.editor)&&null!==l&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.editor?(0,s.jsx)(er,{data:null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.editor}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(Bn,{}),(0,s.jsx)(wt,{}),(0,s.jsx)(yt,{}),(0,s.jsx)(X.ListPlugin,{}),(0,s.jsx)(Y.CheckListPlugin,{}),(0,s.jsx)(zn,{maxDepth:7}),(0,s.jsx)(V.TablePlugin,{}),(0,s.jsx)($e,{}),(0,s.jsx)(Kn,{}),(0,s.jsx)(Me,{}),(0,s.jsx)(G.LinkPlugin,{}),(0,s.jsx)(xn,{}),(0,s.jsx)(gt,{}),(0,s.jsx)($n,{}),(0,s.jsx)(Qn,{}),(0,s.jsx)(mn,{}),(0,s.jsx)(Wn,{}),T,(0,s.jsx)("div",{className:"".concat(p?"animate-fade":""," fixed bottom-10 right-10 text-warningText border-2 bg-slate-300 rounded-md px-2"),children:h}),(0,s.jsx)(ct,{isRichText:N})]}),C&&(0,s.jsx)(ze,{})]})}var rr=n(2291),ar=function(e){(0,ve.Z)(n,e);var t=(0,be.Z)(n);function n(){return(0,xe.Z)(this,n),t.apply(this,arguments)}return(0,ge.Z)(n,[{key:"exportJSON",value:function(){return(0,m.Z)((0,m.Z)({},(0,Lt.Z)((0,Pt.Z)(n.prototype),"exportJSON",this).call(this)),{},{type:"typeahead",version:1})}},{key:"createDOM",value:function(e){var t=(0,Lt.Z)((0,Pt.Z)(n.prototype),"createDOM",this).call(this,e);return t.style.cssText="color: #ccc;",t}}],[{key:"clone",value:function(e){return new n(e.__text,e.__key)}},{key:"getType",value:function(){return"typeahead"}},{key:"importJSON",value:function(e){var t=or(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}}]),n}(ie.TextNode);function or(e){return new ar(e).setMode("inert")}var ir=[Tt.HeadingNode,kt.ListNode,kt.ListItemNode,Tt.QuoteNode,Q.CodeNode,pe.TableNode,pe.TableCellNode,pe.TableRowNode,Q.CodeHighlightNode,xt.AutoLinkNode,xt.LinkNode,rr.OverflowNode,tt,ke,ar,me.HorizontalRuleNode,Ft];function sr(){}function lr(e){var t=e.data,n=F().settings,r=(n.isCollab,n.emptyEditor,{editorState:sr,namespace:"Playground",nodes:(0,h.Z)(ir),onError:function(e){throw e},theme:Gn});return(0,s.jsx)(O.LexicalComposer,{initialConfig:r,children:(0,s.jsx)(q,{children:(0,s.jsx)("div",{className:"editor-shell",children:(0,s.jsx)(nr,{data:t})})})})}function cr(e){var t=e.topic;return(0,s.jsx)($,{children:(0,s.jsx)(lr,{data:t})})}console.warn("If you are profiling the playground app, please ensure you turn off the debug view. You can disable it by pressing on the settings control in the bottom-left of your screen and toggling the debug view setting.");var ur=function(){var e=(0,o.UO)(),t=(0,v.ZP)("https://api.aakhyaan.org"+"/topic/".concat(e.courseId,"/").concat(e.subjectId,"/").concat(e.chapterId,"/").concat(e.topicId),function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.BN)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n=t.data;return(0,s.jsx)("div",{className:"col-span-4 flex flex-col w-full px-2 mt-2",children:(0,s.jsx)(cr,{topic:n})})};function dr(){return(0,s.jsxs)("div",{className:"col-span-4 flex flex-col h-[70vh] md:h-full w-full",children:[(0,s.jsx)("div",{className:"text-3xl text-center font-bold border-b-2 border-green-200 pt-6 pb-2 px-6",children:"Dashboard"}),(0,s.jsx)("div",{className:"p-10 flex-1 my-6 mx-6 border-2 border-gray-200 rounded-xl text-center",children:"The admin is requested to add media files like images and videos by adding url of the file located in the server. You just have to go to 'Media' tab and copy the url of the file. Also be used to content writing. Thank You!"})]})}var fr=function(e){return g().get(e,{withCredentials:!0}).then((function(e){return e.data}))};function hr(){var e=(0,a.useState)(0),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=(0,a.useState)(""),l=(0,r.Z)(i,2),c=l[0],u=l[1],h=(0,a.useState)(!1),m=(0,r.Z)(h,2),p=m[0],x=m[1],b=(0,a.useState)(null),N=(0,r.Z)(b,2),C=N[0],j=N[1],w=(0,a.useState)(null),y=(0,r.Z)(w,2),_=(y[0],y[1]),E=(0,v.ZP)("https://api.aakhyaan.org/file/list",function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=E.data;(0,a.useEffect)((function(){"undefined"!==typeof T&&_(T)}),[T]);var S=10*n,I=Math.ceil((null===T||void 0===T?void 0:T.length)/10),Z=null===T||void 0===T?void 0:T.slice(S,S+10).map((function(e,t){return(0,s.jsxs)("div",{className:"hover:cursor-pointer duration-500 flex flex-col gap-3 max-w-[400px] max-h-[400px] min-w-[200px]",children:[(0,s.jsx)("img",{className:"hover:scale-105 transition-all max-h-[400px] max-w-[300px] object-cover",src:"https://api.aakhyaan.org"+e.fileURL}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{onClick:function(){navigator.clipboard.writeText("https://api.aakhyaan.org"+e.fileURL),u("Copied to Clipboard"),x(!0),setTimeout((function(){x(!1),u("")}),4e3),(0,v.JG)("https://api.aakhyaan.org/courses/list")},className:"hover:cursor-pointer",children:(0,s.jsx)(k.mcF,{size:30})})})]},t)}));return(0,s.jsxs)("div",{className:"col-span-4 relative font-sans dark:bg-background dark:text-mainText w-full h-full flex flex-col ",children:[(0,s.jsx)("div",{className:"".concat(p?"animate-fade":""," fixed bottom-10 right-10 text-blue-900 border-2 bg-slate-300 rounded-md px-2"),children:c}),(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsx)("div",{className:"text-3xl text-center font-bold border-b-2 border-green-200 pt-6 pb-2 px-6",children:"Media"}),(0,s.jsxs)("div",{className:"p-10 my-6 mx-6 border-2 border-gray-200 rounded-xl text-center h-full",children:[(0,s.jsx)("span",{className:"text-xl text-blue-900 font-semibold",children:"Add new Media from here"}),(0,s.jsxs)("form",{className:"flex justify-center mt-4 gap-3 items-center",children:[(0,s.jsx)("input",{type:"file",name:"media",onChange:function(e){j(e.target.files[0])}}),(0,s.jsx)("button",{className:"font-sans text-lg hover:-translate-y-0.5 transition-all bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",onClick:function(e){if(e.preventDefault(),C){var t=new FormData;t.append("file",C);var n=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().post("https://api.aakhyaan.org/file/upload",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n(),(0,v.JG)("https://api.aakhyaan.org/file/list")}},children:"Submit"})]}),(0,s.jsx)("div",{className:"gap-14 grid md:grid-cols-2 items-center justify-center p-10 px-20 mb-5",children:Z})]})]}),(0,s.jsx)("div",{className:"flex justify-center mb-14 absolute bottom-0 left-0 right-0",children:(0,s.jsx)(mr,{previousLabel:"Prev",nextLabel:"Next",pageCount:I,onPageChange:function(e){var t=e.selected;o(t-1)},containerClassName:"flex gap-3 items-center select-none",previousLinkClassName:"text-lg text-blue-900 dark:text-blue-100 hover:cursor-pointer",nextLinkClassName:"text-lg text-blue-900 dark:text-blue-100 hover:cursor-pointer",activeClassName:"bg-blue-600 text-white dark:bg-black hover:bg-blue-400",pageClassName:"border-2 px-3 py-1 rounded-md hover:bg-blue-600 hover:cursor-pointer hover:text-white dark:hover:bg-black"})})]})}function mr(e){var t=e.nextLabel,n=e.previousLabel,o=e.pageCount,i=e.onPageChange,l=e.containerClassName,c=e.previousLinkClassName,u=e.nextLinkClassName,d=e.pageClassName,f=e.activeClassName,m=e.disabledClassName,p=(0,a.useState)(1),x=(0,r.Z)(p,2),g=x[0],v=x[1];return(0,s.jsx)(s.Fragment,{children:o>1?(0,s.jsxs)("div",{className:l,children:[(0,s.jsx)("div",{onClick:function(){g-1!==0&&(i({selected:g-1}),v(g-1))},className:c,children:n}),(0,h.Z)(Array(o)).map((function(e,t){return(0,s.jsx)("div",{onClick:function(){i({selected:t+1}),g!==t+1&&v(t+1)},className:"".concat(g===t+1?f:m," ").concat(d),children:t+1},t+1)})),(0,s.jsx)("div",{onClick:function(){g+1<=o&&(i({selected:g+1}),v(g+1))},className:u,children:t})]}):(0,s.jsx)(s.Fragment,{})})}function pr(){var e=(0,a.useState)(0),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=(0,a.useState)(""),l=(0,r.Z)(i,2),c=l[0],u=(l[1],(0,a.useState)(!1)),h=(0,r.Z)(u,2),m=h[0],p=(h[1],(0,a.useState)(null)),x=(0,r.Z)(p,2),g=(x[0],x[1],(0,a.useState)(null)),b=(0,r.Z)(g,2),N=(b[0],b[1]),C=(0,v.ZP)("https://api.aakhyaan.org/user/payments",function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=C.data;(0,a.useEffect)((function(){"undefined"!==typeof j&&N(j)}),[j]);var w=10*n,y=Math.ceil((null===j||void 0===j?void 0:j.length)/10),_=null===j||void 0===j?void 0:j.slice(w,w+10).map((function(e,t){return(0,s.jsxs)("div",{className:"hover:cursor-pointer duration-500 flex flex-col gap-3 max-w-[400px] max-h-[400px] min-w-[200px]",children:[(0,s.jsx)("a",{href:"https://api.aakhyaan.org"+e.fileURL,target:"_blank",children:(0,s.jsx)("img",{className:"hover:scale-105 transition-all max-h-[400px] max-w-[300px] object-cover",src:"https://api.aakhyaan.org"+e.fileURL})}),(0,s.jsxs)("div",{className:"flex justify-center flex-col text-left",children:[(0,s.jsx)("div",{children:e.user.name}),(0,s.jsx)("div",{children:e.user.email}),(0,s.jsx)("div",{children:e.user.phone})]})]},t)}));return(0,s.jsxs)("div",{className:"col-span-4 relative font-sans dark:bg-background dark:text-mainText w-full h-full flex flex-col ",children:[(0,s.jsx)("div",{className:"".concat(m?"animate-fade":""," fixed bottom-10 right-10 text-blue-900 border-2 bg-slate-300 rounded-md px-2"),children:c}),(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsx)("div",{className:"text-3xl text-center font-bold border-b-2 border-green-200 pt-6 pb-2 px-6",children:"Payment"}),(0,s.jsx)("div",{className:"p-10 my-6 mx-6 border-2 border-gray-200 rounded-xl text-center h-full",children:(0,s.jsx)("div",{className:"gap-14 grid md:grid-cols-2 items-center justify-center p-10 px-20 mb-5",children:_})})]}),(0,s.jsx)("div",{className:"flex justify-center mb-14 absolute bottom-0 left-0 right-0",children:(0,s.jsx)(xr,{previousLabel:"Prev",nextLabel:"Next",pageCount:y,onPageChange:function(e){var t=e.selected;o(t-1)},containerClassName:"flex gap-3 items-center select-none",previousLinkClassName:"text-lg text-blue-900 dark:text-blue-100 hover:cursor-pointer",nextLinkClassName:"text-lg text-blue-900 dark:text-blue-100 hover:cursor-pointer",activeClassName:"bg-blue-600 text-white dark:bg-black hover:bg-blue-400",pageClassName:"border-2 px-3 py-1 rounded-md hover:bg-blue-600 hover:cursor-pointer hover:text-white dark:hover:bg-black"})})]})}function xr(e){var t=e.nextLabel,n=e.previousLabel,o=e.pageCount,i=e.onPageChange,l=e.containerClassName,c=e.previousLinkClassName,u=e.nextLinkClassName,d=e.pageClassName,f=e.activeClassName,m=e.disabledClassName,p=(0,a.useState)(1),x=(0,r.Z)(p,2),g=x[0],v=x[1];return(0,s.jsx)(s.Fragment,{children:o>1?(0,s.jsxs)("div",{className:l,children:[(0,s.jsx)("div",{onClick:function(){g-1!==0&&(i({selected:g-1}),v(g-1))},className:c,children:n}),(0,h.Z)(Array(o)).map((function(e,t){return(0,s.jsx)("div",{onClick:function(){i({selected:t+1}),g!==t+1&&v(t+1)},className:"".concat(g===t+1?f:m," ").concat(d),children:t+1},t+1)})),(0,s.jsx)("div",{onClick:function(){g+1<=o&&(i({selected:g+1}),v(g+1))},className:u,children:t})]}):(0,s.jsx)(s.Fragment,{})})}var gr=n(614),vr=n(4270),br=function(e){var t=e.activePage,n=e.setActivePage,r=e.location;return(0,s.jsxs)("div",{className:"flex flex-col bg-blue-50 px-6 pt-1 relative",children:[(0,s.jsx)(Nr,{}),(0,s.jsx)(Cr,{activePage:t,location:r,setActivePage:n}),(0,s.jsx)(jr,{})]})},Nr=function(){return(0,s.jsx)("div",{className:"flex items-center ml-1",children:(0,s.jsx)("div",{className:"select-none md:flex min-w-[100px] max-w-[120px] mb-3 ",children:(0,s.jsx)("img",{src:"/aakhyaanText.png"})})})},Cr=function(e){var t=e.activePage,n=e.setActivePage,r=e.location;return(0,a.useEffect)((function(){n(r||"dashboard")}),[r,n]),(0,s.jsxs)("nav",{className:"space-y-2",children:[(0,s.jsx)(i.rU,{to:"/admin/",onClick:function(){return n("dashboard")},className:"flex items-center no-underline p-3 rounded-md ".concat("dashboard"===t?"bg-green-500":"transition-all hover:cursor-pointer hover:text-blue-800 hover:translate-x-0.5 hover:translate-y-0.5"),children:(0,s.jsx)("div",{className:"font-bold pl-3",children:"Dashboard"})}),(0,s.jsx)(i.rU,{to:"/admin/courses",onClick:function(){return n("courses")},className:"flex items-center no-underline p-3 rounded-md ".concat("courses"===t?"bg-green-500":"transition-all hover:cursor-pointer hover:text-blue-800 hover:translate-x-0.5 hover:translate-y-0.5"),children:(0,s.jsx)("div",{className:"font-bold pl-3",children:"Courses"})}),(0,s.jsx)(i.rU,{to:"/admin/media",onClick:function(){return n("media")},className:"flex items-center no-underline p-3 rounded-md ".concat("media"===t?"bg-green-500":"transition-all hover:cursor-pointer hover:text-blue-800 hover:translate-x-0.5 hover:translate-y-0.5"),children:(0,s.jsx)("div",{className:"font-bold pl-3",children:"Media"})}),(0,s.jsx)(i.rU,{to:"/admin/payment",onClick:function(){return n("media")},className:"flex items-center no-underline p-3 rounded-md ".concat("payment"===t?"bg-green-500":"transition-all hover:cursor-pointer hover:text-blue-800 hover:translate-x-0.5 hover:translate-y-0.5"),children:(0,s.jsx)("div",{className:"font-bold pl-3",children:"Payment"})})]})},jr=function(){return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)(i.rU,{className:"p-3 pl-6 font-bold flex items-center hover:text-blue-800 ",to:"/",children:"Go Home"}),(0,s.jsx)("p",{className:"md:absolute md:bottom-0 text-center text-gray-500 text-xs mt-2 md:mb-5",children:"Aakhyaan \xa9 2022 aakhyaan.org. All Rights Reserved"})]})},wr=function(){var e=(0,o.TH)(),t=(0,a.useState)(""),n=(0,r.Z)(t,2),i=n[0],l=n[1],c=e.pathname.split("/");return c=c[2],(0,s.jsxs)("div",{className:"font-sans text-lg h-full w-full grid grid-cols-1 md:grid-cols-5 ",children:[(0,s.jsx)(vr.Z,{children:(0,s.jsx)("title",{children:"Admin | Aakhyaan Academy"})}),(0,s.jsx)(br,{activePage:i,location:c,setActivePage:l}),(0,s.jsx)(u,{children:(0,s.jsxs)(o.Z5,{children:[(0,s.jsx)(o.AW,{path:"/",element:(0,s.jsx)(dr,{})}),(0,s.jsx)(o.AW,{path:"/courses",element:(0,s.jsx)(I,{})}),(0,s.jsx)(o.AW,{path:"/media",element:(0,s.jsx)(hr,{})}),(0,s.jsx)(o.AW,{path:"/Payment",element:(0,s.jsx)(pr,{})}),(0,s.jsx)(o.AW,{path:"/courses/:courseId/:subjectId",element:(0,s.jsx)(M,{})}),(0,s.jsx)(o.AW,{path:"/courses/:courseId/:subjectId/:chapterId/:topicId",element:(0,s.jsx)(ur,{})}),(0,s.jsx)(o.AW,{path:"*",element:(0,s.jsx)(gr.default,{})})]})})]})}},614:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});n(2791);var r=n(3504),a=n(4270),o=n(184);function i(){return(0,o.jsxs)("div",{className:"bg-back w-full h-full flex col-span-4",children:[(0,o.jsx)(a.Z,{children:(0,o.jsx)("title",{children:"Page Not Found | Aakhyaan Academy"})}),(0,o.jsxs)("div",{className:"m-auto flex flex-col p-10",children:[(0,o.jsx)("div",{className:"mx-auto dark:hidden max-w-[250px]",children:(0,o.jsx)("img",{alt:"",src:"aakhyaanText.png"})}),(0,o.jsx)("div",{className:"invisible dark:visible max-w-[250px]",children:(0,o.jsx)("img",{alt:"",src:"aakhyaanTextWhite.png"})}),(0,o.jsxs)("span",{className:"font-sans",children:[(0,o.jsx)("span",{className:"font-bold",children:"404"}),". That's an error"]}),(0,o.jsxs)("span",{className:"mt-5 font-sans",children:["The requested URL"," ",(0,o.jsxs)("strong",{children:[window.location.href.replace("https://admin.aakhyaan.org",""),"\xa0"]}),"was not found on this server.",(0,o.jsx)("span",{className:"font-thin",children:"That\u2019s all we know."})]}),(0,o.jsx)(r.rU,{to:"/",className:"mt-5 font-sans text-xl hover:underline transition-all text-blue-600",children:"Goto Home"})]})]})}}}]);
//# sourceMappingURL=333.d58aa4c0.chunk.js.map